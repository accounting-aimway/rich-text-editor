{"version":3,"file":"index.es.js","sources":["../src/utils/editorsUtils.js","../src/LinkTooltip.jsx","../src/CustomSelect.jsx","../src/Toolbar.jsx","../src/RichtextEditor.jsx"],"sourcesContent":["/**\n * Utility functions for rich text editor operations\n * Provides formatting, selection, and content manipulation functions\n */\n\n/**\n * Apply formatting to the selected text\n * @param {string} command - The formatting command\n * @param {string} value - Optional value for the command\n */\nexport const applyFormatting = (command, value = null) => {\n  document.execCommand(command, false, value);\n};\n\n/**\n * Get information about the current selection\n * @returns {object|null} Selection information or null if no selection\n */\nexport const getSelectionInfo = () => {\n  const selection = window.getSelection();\n  if (!selection || selection.rangeCount === 0) {\n    return null;\n  }\n\n  const range = selection.getRangeAt(0);\n  return {\n    selection,\n    range: range.cloneRange(),\n    text: selection.toString(),\n    isCollapsed: selection.isCollapsed,\n  };\n};\n\n/**\n * Insert a link at the specified range or current selection\n * @param {string} url - The URL to insert\n * @param {Range} range - Optional range to insert at\n */\nexport const insertLink = (url, range = null) => {\n  const selection = window.getSelection();\n\n  if (range) {\n    // Restore the stored range\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n\n  if (selection.isCollapsed) {\n    // No text selected, insert the URL as both text and link\n    const linkElement = document.createElement(\"a\");\n    linkElement.href = url;\n    linkElement.textContent = url;\n    linkElement.target = \"_blank\";\n    linkElement.rel = \"noopener noreferrer\";\n\n    range.insertNode(linkElement);\n    range.setStartAfter(linkElement);\n    range.setEndAfter(linkElement);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  } else {\n    // Text is selected, convert it to a link\n    document.execCommand(\"createLink\", false, url);\n\n    // Set target and rel attributes for the created link\n    const links = document.querySelectorAll('a[href=\"' + url + '\"]');\n    links.forEach((link) => {\n      link.target = \"_blank\";\n      link.rel = \"noopener noreferrer\";\n    });\n  }\n};\n\n/**\n * Remove link formatting from the current selection\n */\nexport const removeLink = () => {\n  document.execCommand(\"unlink\");\n};\n\n/**\n * Check if the current selection has specific formatting\n * @param {string} command - The formatting command to check\n * @returns {boolean} Whether the formatting is active\n */\nexport const isFormatActive = (command) => {\n  return document.queryCommandState(command);\n};\n\n/**\n * Get the current format block type\n * @returns {string} The current block format (h1, h2, h3, h4, h5, h6, p, blockquote)\n */\nexport const getCurrentBlockFormat = () => {\n  const sel = window.getSelection();\n  if (!sel?.anchorNode) return \"p\";\n\n  let node =\n    sel.anchorNode.nodeType === Node.ELEMENT_NODE\n      ? sel.anchorNode\n      : sel.anchorNode.parentElement;\n\n  while (node) {\n    const tag = node.tagName?.toUpperCase();\n\n    if ([\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\", \"P\", \"BLOCKQUOTE\"].includes(tag)) {\n      return tag.toLowerCase();\n    }\n\n    // If we're in a list item, look inside it for block-level content\n    if (tag === \"LI\") {\n      const blockInside = Array.from(node.childNodes).find(\n        (child) =>\n          child.nodeType === Node.ELEMENT_NODE &&\n          [\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\", \"P\"].includes(child.tagName)\n      );\n\n      if (blockInside) {\n        return blockInside.tagName.toLowerCase();\n      }\n\n      return \"p\"; // Default block inside list item\n    }\n\n    node = node.parentElement;\n  }\n\n  return \"p\";\n};\n\n/**\n * Insert HTML at the current cursor position\n * @param {string} html - The HTML to insert\n */\nexport const insertHTML = (html) => {\n  const selection = window.getSelection();\n  if (selection.rangeCount > 0) {\n    const range = selection.getRangeAt(0);\n    range.deleteContents();\n\n    const div = document.createElement(\"div\");\n    div.innerHTML = html;\n    const fragment = document.createDocumentFragment();\n\n    while (div.firstChild) {\n      fragment.appendChild(div.firstChild);\n    }\n\n    range.insertNode(fragment);\n    range.collapse(false);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n};\n\n/**\n * Get the plain text content from HTML and count characters\n * @param {string} rawText - The HTML content\n * @returns {number} Character count of plain text content\n */\nexport const countContentRealLength = (rawText) => {\n  if (!rawText) return 0;\n\n  // Remove HTML tags using a regular expression\n  const textContent = rawText.replace(/<\\/?[^>]+(>|$)/g, \"\");\n\n  // Count the length of the cleaned content\n  const characterCount = textContent.length;\n\n  return characterCount;\n};\n\n/**\n * Clean up HTML content by removing unnecessary tags and attributes\n * @param {string} html - The HTML to clean\n * @returns {string} Cleaned HTML\n */\nexport const cleanHTML = (html) => {\n  if (!html) return \"\";\n\n  // Create a temporary div to parse the HTML\n  const div = document.createElement(\"div\");\n  div.innerHTML = html;\n\n  // Remove empty paragraphs and divs\n  const emptyElements = div.querySelectorAll(\"p:empty, div:empty\");\n  emptyElements.forEach((el) => el.remove());\n\n  // Remove style attributes (keep only semantic formatting)\n  const elementsWithStyle = div.querySelectorAll(\"[style]\");\n  elementsWithStyle.forEach((el) => el.removeAttribute(\"style\"));\n\n  return div.innerHTML;\n};\n","import React, { useEffect, useRef, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box, Button, Paper, TextField, Typography } from \"@mui/material\";\n\n/**\n * LinkTooltip component for inserting and editing links\n * Provides a modal-like interface for link management\n */\nexport const LinkTooltip = ({\n  position,\n  onSubmit,\n  onClose,\n  initialValue = \"\",\n  isEdit = false,\n  tooltipRef,\n  storedRange,\n}) => {\n  const [url, setUrl] = useState(initialValue);\n  const inputRef = useRef(null);\n\n  // Focus and select input when component mounts or initialValue changes\n  useEffect(() => {\n    setUrl(initialValue);\n    // Focus the input after a brief delay to ensure it's rendered\n    setTimeout(() => {\n      if (inputRef.current && typeof inputRef.current.focus === \"function\") {\n        inputRef.current.focus();\n      }\n      if (inputRef.current && typeof inputRef.current.select === \"function\") {\n        inputRef.current.select();\n      }\n    }, 50);\n  }, [initialValue]);\n\n  /**\n   * Handle form submission\n   * @param {Event} e - Form submission event\n   */\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (url.trim()) {\n      let formattedUrl = url.trim();\n      // Add https:// if no protocol is specified\n      if (!formattedUrl.match(/^https?:\\/\\//)) {\n        formattedUrl = \"https://\" + formattedUrl;\n      }\n      onSubmit(formattedUrl);\n    }\n  };\n\n  /**\n   * Handle keyboard events\n   * @param {KeyboardEvent} e - Keyboard event\n   */\n  const handleKeyDown = (e) => {\n    if (e.key === \"Escape\") {\n      onClose();\n    }\n  };\n\n  /**\n   * Handle link removal\n   * Restores selection and removes the link\n   */\n  const handleRemoveLink = () => {\n    if (storedRange) {\n      const selection = window.getSelection();\n      selection.removeAllRanges();\n      selection.addRange(storedRange);\n    }\n    document.execCommand(\"unlink\");\n    onClose();\n  };\n\n  return (\n    <Paper\n      elevation={4}\n      ref={tooltipRef}\n      sx={{\n        position: \"absolute\",\n        left: position.x,\n        top: position.y,\n        transform: \"translateX(-50%)\",\n        zIndex: 1000,\n        p: 2,\n        minWidth: 320,\n        maxWidth: 400,\n      }}\n    >\n      <Box\n        component=\"form\"\n        sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}\n      >\n        <Typography variant=\"subtitle2\" sx={{ fontWeight: 600 }}>\n          {isEdit ? \"Edit Link\" : \"Insert Link\"}\n        </Typography>\n\n        <TextField\n          inputRef={inputRef}\n          fullWidth\n          size=\"small\"\n          value={url}\n          onChange={(e) => setUrl(e.target.value)}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Enter URL (e.g., https://example.com)\"\n          variant=\"outlined\"\n        />\n\n        <Box\n          sx={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n          }}\n        >\n          <Box sx={{ display: \"flex\", gap: 1 }}>\n            <Button\n              variant=\"contained\"\n              size=\"small\"\n              disabled={!url.trim()}\n              sx={{ textTransform: \"none\" }}\n              onClick={handleSubmit}\n            >\n              {isEdit ? \"Update\" : \"Insert\"}\n            </Button>\n            <Button\n              type=\"button\"\n              variant=\"outlined\"\n              size=\"small\"\n              onClick={onClose}\n              sx={{ textTransform: \"none\" }}\n            >\n              Cancel\n            </Button>\n          </Box>\n\n          {isEdit && (\n            <Button\n              type=\"button\"\n              variant=\"contained\"\n              color=\"error\"\n              size=\"small\"\n              onClick={handleRemoveLink}\n              sx={{ textTransform: \"none\" }}\n            >\n              Remove\n            </Button>\n          )}\n        </Box>\n      </Box>\n    </Paper>\n  );\n};\n\n// PropTypes for type checking\nLinkTooltip.propTypes = {\n  /** Position object with x and y coordinates */\n  position: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n  }).isRequired,\n  /** Callback function when link is submitted */\n  onSubmit: PropTypes.func.isRequired,\n  /** Callback function when tooltip is closed */\n  onClose: PropTypes.func.isRequired,\n  /** Initial URL value for the input field */\n  initialValue: PropTypes.string,\n  /** Whether the tooltip is in edit mode */\n  isEdit: PropTypes.bool,\n  /** Ref for the tooltip container */\n  tooltipRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.any }),\n  ]),\n  /** Stored range for link editing */\n  storedRange: PropTypes.object,\n};\n\n// Default props\nLinkTooltip.defaultProps = {\n  initialValue: \"\",\n  isEdit: false,\n  tooltipRef: null,\n  storedRange: null,\n};\n","import React, { useState, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box, Popover, MenuItem } from \"@mui/material\";\nimport { styled, useTheme } from \"@mui/material/styles\";\nimport { ExpandMore as ExpandMoreIcon } from \"@mui/icons-material\";\n\n/**\n * Design tokens from Figma (node-id: 32:54592)\n */\nconst tokens = {\n  spacing: {\n    spacing0_5: \"4px\",\n    spacing1: \"8px\",\n  },\n  radius: {\n    small: \"4px\",\n  },\n  typography: {\n    inputText: {\n      fontFamily: \"'Roboto', sans-serif\",\n      fontSize: \"14px\",\n      fontWeight: 400,\n      lineHeight: \"24px\",\n    },\n  },\n};\n\n/**\n * Styled container matching Figma design (node-id: 32:54592)\n */\nconst SelectContainer = styled(Box)({\n  position: \"relative\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"flex-start\",\n});\n\nconst SelectInput = styled(Box)({\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"flex-start\",\n  paddingLeft: tokens.spacing.spacing1,\n  paddingRight: 0,\n  borderRadius: tokens.radius.small,\n  cursor: \"pointer\",\n});\n\nconst DataContainer = styled(Box)({\n  display: \"flex\",\n  alignItems: \"flex-end\",\n  justifyContent: \"flex-end\",\n  gap: tokens.spacing.spacing0_5,\n});\n\nconst ContentContainer = styled(Box)({\n  display: \"flex\",\n  alignItems: \"flex-start\",\n  gap: tokens.spacing.spacing1,\n  overflow: \"hidden\",\n  padding: `${tokens.spacing.spacing0_5} 0`,\n});\n\nconst ValueText = styled(\"span\")(({ theme }) => ({\n  fontFamily: tokens.typography.inputText.fontFamily,\n  fontSize: tokens.typography.inputText.fontSize,\n  fontWeight: tokens.typography.inputText.fontWeight,\n  lineHeight: tokens.typography.inputText.lineHeight,\n  color: theme.palette.text.secondary,\n  whiteSpace: \"nowrap\",\n  overflow: \"hidden\",\n  textOverflow: \"ellipsis\",\n}));\n\nconst ButtonContainer = styled(Box)({\n  display: \"flex\",\n  alignItems: \"flex-end\",\n  justifyContent: \"center\",\n  padding: `0 ${tokens.spacing.spacing0_5}`,\n});\n\nconst IconWrapper = styled(Box)(({ open }) => ({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  height: \"32px\",\n  padding: `${tokens.spacing.spacing1} 0`,\n  borderRadius: tokens.radius.small,\n  \"& > div\": {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: tokens.spacing.spacing0_5,\n    borderRadius: tokens.radius.small,\n    overflow: \"hidden\",\n    transition: \"transform 0.2s ease\",\n    transform: open ? \"rotate(180deg)\" : \"rotate(0deg)\",\n  },\n}));\n\n/**\n * CustomSelect component matching Figma design (node-id: 32:54592)\n * A minimal styled select dropdown without border\n */\nexport const CustomSelect = ({\n  value,\n  options = [],\n  onChange,\n  placeholder = \"Select...\",\n  disabled = false,\n  sx = {},\n}) => {\n  const theme = useTheme();\n  const [open, setOpen] = useState(false);\n  const anchorRef = useRef(null);\n\n  const selectedOption = options.find((opt) => opt.value === value);\n  const displayValue = selectedOption?.label || placeholder;\n\n  const handleClick = () => {\n    if (!disabled) {\n      setOpen(true);\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleSelect = (optionValue) => {\n    if (onChange) {\n      onChange({ target: { value: optionValue } });\n    }\n    handleClose();\n  };\n\n  return (\n    <SelectContainer sx={sx}>\n      <SelectInput\n        ref={anchorRef}\n        onClick={handleClick}\n        tabIndex={disabled ? -1 : 0}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            handleClick();\n          }\n        }}\n        role=\"combobox\"\n        aria-expanded={open}\n        aria-haspopup=\"listbox\"\n        sx={{\n          opacity: disabled ? 0.5 : 1,\n          pointerEvents: disabled ? \"none\" : \"auto\",\n        }}\n      >\n        <DataContainer>\n          <ContentContainer>\n            <ValueText>{displayValue}</ValueText>\n          </ContentContainer>\n          <ButtonContainer>\n            <IconWrapper open={open}>\n              <div>\n                <ExpandMoreIcon\n                  sx={{\n                    fontSize: 24,\n                    color: theme.palette.text.secondary,\n                  }}\n                />\n              </div>\n            </IconWrapper>\n          </ButtonContainer>\n        </DataContainer>\n      </SelectInput>\n\n      <Popover\n        open={open}\n        anchorEl={anchorRef.current}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"left\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"left\",\n        }}\n        slotProps={{\n          paper: {\n            sx: {\n              mt: 0.5,\n              minWidth: 200,\n              borderRadius: tokens.radius.small,\n              backgroundColor: theme.palette.background.paper,\n              boxShadow: \"0px 4px 16px rgba(29, 29, 43, 0.4)\",\n            },\n          },\n        }}\n      >\n        <Box sx={{ py: \"4px\" }}>\n          {options.map((option) => (\n            <MenuItem\n              key={option.value}\n              onClick={() => handleSelect(option.value)}\n              selected={option.value === value}\n              sx={{\n                height: \"28px\",\n                minHeight: \"28px\",\n                minWidth: 200,\n                pl: \"16px\",\n                pr: \"12px\",\n                py: 0,\n                fontFamily: tokens.typography.inputText.fontFamily,\n                fontSize: tokens.typography.inputText.fontSize,\n                fontWeight: tokens.typography.inputText.fontWeight,\n                lineHeight: \"16px\",\n                color: theme.palette.text.secondary,\n                \"&.Mui-selected\": {\n                  backgroundColor: theme.palette.action.selected,\n                },\n                \"&.Mui-selected:hover\": {\n                  backgroundColor: theme.palette.action.hover,\n                },\n                \"&:hover\": {\n                  backgroundColor: theme.palette.action.hover,\n                },\n              }}\n            >\n              {option.label}\n            </MenuItem>\n          ))}\n        </Box>\n      </Popover>\n    </SelectContainer>\n  );\n};\n\nCustomSelect.propTypes = {\n  /** Current selected value */\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Array of options: [{ value: string, label: string }] */\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n        .isRequired,\n      label: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  /** Callback when value changes */\n  onChange: PropTypes.func,\n  /** Placeholder text when no value selected */\n  placeholder: PropTypes.string,\n  /** Whether the select is disabled */\n  disabled: PropTypes.bool,\n  /** Additional styles */\n  sx: PropTypes.object,\n};\n\nCustomSelect.defaultProps = {\n  value: undefined,\n  onChange: undefined,\n  placeholder: \"Select...\",\n  disabled: false,\n  sx: {},\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  FormatIndentIncreaseRounded as FormatIndentIncreaseRoundedIcon,\n  FormatIndentDecreaseRounded as FormatIndentDecreaseRoundedIcon,\n  FormatListBulletedRounded as FormatListBulletedRoundedIcon,\n  FormatListNumberedRounded as FormatListNumberedRoundedIcon,\n  FormatBoldRounded,\n  FormatItalicRounded,\n  FormatUnderlined,\n  StrikethroughS,\n  Link as LinkIcon,\n  FormatClear,\n} from \"@mui/icons-material\";\n\nimport { Box, Divider, IconButton, Tooltip } from \"@mui/material\";\nimport { useTheme } from \"@mui/material/styles\";\nimport { CustomSelect } from \"./CustomSelect\";\n\n/**\n * Toolbar component for the rich text editor\n * Provides formatting controls including text formatting, headings, lists, and indentation\n */\nexport const Toolbar = ({\n  onFormat,\n  showStrikethrough = false,\n  showCleanFormat = false,\n  currentBlockFormat = \"p\",\n  currentInlineFormats = {},\n}) => {\n  // Get MUI theme from parent\n  const theme = useTheme();\n\n  // Define toolbar buttons configuration\n  const toolbarButtons = [\n    {\n      command: \"bold\",\n      icon: FormatBoldRounded,\n      title: \"Bold (Ctrl+B)\",\n      group: \"text\",\n    },\n    {\n      command: \"italic\",\n      icon: FormatItalicRounded,\n      title: \"Italic (Ctrl+I)\",\n      group: \"text\",\n    },\n    {\n      command: \"underline\",\n      icon: FormatUnderlined,\n      title: \"Underline (Ctrl+U)\",\n      group: \"text\",\n    },\n    showStrikethrough && {\n      command: \"strikeThrough\",\n      icon: StrikethroughS,\n      title: \"Strikethrough (Ctrl+S)\",\n      group: \"text\",\n    },\n    {\n      command: \"createLink\",\n      icon: LinkIcon,\n      title: \"Insert Link (Ctrl+K)\",\n      group: \"link\",\n    },\n    showCleanFormat && {\n      command: \"removeFormat\",\n      icon: FormatClear,\n      title: \"Remove Formatting (Ctrl+E)\",\n      group: \"clean\",\n    },\n  ].filter(Boolean);\n\n  // Define heading format options\n  const formatButtons = [\n    {\n      command: \"formatBlock\",\n      value: \"h1\",\n      label: \"Heading 1\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"h2\",\n      label: \"Heading 2\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"h3\",\n      label: \"Heading 3\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"h4\",\n      label: \"Heading 4\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"h5\",\n      label: \"Heading 5\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"h6\",\n      label: \"Heading 6\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"p\",\n      label: \"Paragraph\",\n      group: \"heading\",\n    },\n  ];\n\n  // Define list formatting options\n  const listButtons = [\n    {\n      command: \"insertUnorderedList\",\n      label: \"â€¢ List\",\n      group: \"list\",\n      icon: FormatListBulletedRoundedIcon,\n    },\n    {\n      command: \"insertOrderedList\",\n      label: \"1. List\",\n      group: \"list\",\n      icon: FormatListNumberedRoundedIcon,\n    },\n  ];\n\n  // Define indentation controls\n  const indentButtons = [\n    {\n      command: \"outdent\",\n      label: \"Outdent\",\n      group: \"indent\",\n      icon: FormatIndentDecreaseRoundedIcon,\n    },\n    {\n      command: \"indent\",\n      label: \"Indent\",\n      group: \"indent\",\n      icon: FormatIndentIncreaseRoundedIcon,\n    },\n  ];\n\n  /**\n   * Handle button click events\n   * @param {string} command - The formatting command to execute\n   * @param {string} value - Optional value for the command\n   */\n  const handleButtonClick = (command, value) => {\n    onFormat(command, value);\n  };\n\n  /**\n   * Handle menu item selection for heading dropdown\n   * @param {string} command - The formatting command\n   * @param {string} value - The selected value\n   */\n  const handleMenuItemClick = (command, value) => {\n    onFormat(command, value);\n  };\n\n  return (\n    <Box\n      sx={{\n        p: \"0.5rem 1rem\",\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        alignItems: \"center\",\n        gap: 0.5,\n      }}\n    >\n      {/* Heading dropdown */}\n      <CustomSelect\n        value={currentBlockFormat}\n        options={formatButtons.map(({ value, label }) => ({\n          value,\n          label,\n        }))}\n        onChange={(event) =>\n          handleMenuItemClick(\"formatBlock\", event.target.value)\n        }\n        sx={{ minWidth: 120 }}\n      />\n\n      <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\n\n      {/* Text formatting buttons */}\n      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 0.5 }}>\n        {toolbarButtons.map(({ command, icon: Icon, title }) => {\n          const active = currentInlineFormats?.[command] || false;\n          return (\n            <Tooltip key={command} title={title}>\n              <IconButton\n                onClick={() => handleButtonClick(command)}\n                size=\"small\"\n                sx={{\n                  borderRadius: \"4px\",\n                  color: active\n                    ? theme.palette.primary.main\n                    : theme.palette.text.secondary,\n                  bgcolor: active ? \"action.selected\" : undefined,\n                  \"&:hover\": { bgcolor: theme.palette.action.hover },\n                  \"&:active\": { bgcolor: theme.palette.action.selected },\n                }}\n              >\n                <Icon fontSize=\"medium\" />\n              </IconButton>\n            </Tooltip>\n          );\n        })}\n      </Box>\n\n      <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\n\n      {/* List and quote buttons */}\n      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 0.5 }}>\n        {listButtons.map(({ command, value, label, icon: Icon }) => {\n          let active = false;\n          if (command === \"formatBlock\" && value === \"blockquote\") {\n            active = currentBlockFormat === \"blockquote\";\n          } else if (command === \"insertUnorderedList\") {\n            active = currentInlineFormats.unorderedList;\n          } else if (command === \"insertOrderedList\") {\n            active = currentInlineFormats.orderedList;\n          }\n\n          return (\n            <Tooltip key={command} title={label}>\n              <IconButton\n                onClick={() => handleButtonClick(command)}\n                size=\"small\"\n                sx={{\n                  borderRadius: \"4px\",\n                  color: active\n                    ? theme.palette.primary.main\n                    : theme.palette.text.secondary,\n                  bgcolor: active ? \"action.selected\" : undefined,\n                  \"&:hover\": { bgcolor: theme.palette.action.hover },\n                  \"&:active\": { bgcolor: theme.palette.action.selected },\n                }}\n              >\n                <Icon fontSize=\"medium\" />\n              </IconButton>\n            </Tooltip>\n          );\n        })}\n      </Box>\n\n      <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\n\n      {/* Indentation controls */}\n      <Box\n        sx={{\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: 0.5,\n        }}\n      >\n        {indentButtons.map(({ command, label, icon: Icon }) => {\n          const active = currentInlineFormats?.[command] || false;\n          return (\n            <Tooltip key={command} title={label}>\n              <IconButton\n                onClick={() => handleButtonClick(command)}\n                size=\"small\"\n                sx={{\n                  borderRadius: \"4px\",\n                  color: active\n                    ? theme.palette.primary.main\n                    : theme.palette.text.secondary,\n                  bgcolor: active ? \"action.selected\" : undefined,\n                  \"&:hover\": { bgcolor: theme.palette.action.hover },\n                  \"&:active\": { bgcolor: theme.palette.action.selected },\n                }}\n              >\n                <Icon fontSize=\"medium\" />\n              </IconButton>\n            </Tooltip>\n          );\n        })}\n      </Box>\n    </Box>\n  );\n};\n\n// PropTypes for type checking\nToolbar.propTypes = {\n  /** Callback function for formatting commands */\n  onFormat: PropTypes.func.isRequired,\n  /** Whether to show strikethrough button */\n  showStrikethrough: PropTypes.bool,\n  /** Whether to show clean format button */\n  showCleanFormat: PropTypes.bool,\n  /** Current block format (h1, h2, h3, h4, h5, h6, p) */\n  currentBlockFormat: PropTypes.string,\n  /** Object containing current inline format states */\n  currentInlineFormats: PropTypes.shape({\n    bold: PropTypes.bool,\n    italic: PropTypes.bool,\n    underline: PropTypes.bool,\n    strikeThrough: PropTypes.bool,\n    link: PropTypes.bool,\n    unorderedList: PropTypes.bool,\n    orderedList: PropTypes.bool,\n  }),\n};\n\n// Default props\nToolbar.defaultProps = {\n  showStrikethrough: false,\n  showCleanFormat: false,\n  currentBlockFormat: \"p\",\n  currentInlineFormats: {},\n};\n","import React, { useCallback, useRef, useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box } from \"@mui/material\";\nimport { styled, useTheme } from \"@mui/material/styles\";\nimport {\n  applyFormatting,\n  insertLink,\n  countContentRealLength,\n  getCurrentBlockFormat,\n} from \"./utils/editorsUtils\";\nimport { LinkTooltip } from \"./LinkTooltip\";\nimport { Toolbar } from \"./Toolbar\";\n\n/**\n * Design tokens from Figma\n */\nconst designTokens = {\n  colors: {\n    borderPrimary: \"#0b89d1\",\n    textDefault: \"#536886\",\n    textPrimary: \"#0b89d1\",\n    surfaceBase: \"#ffffff\",\n  },\n  spacing: {\n    spacing1: \"8px\",\n    spacing1_5: \"12px\",\n  },\n  borderRadius: \"4px\",\n  typography: {\n    inputText: {\n      fontFamily: \"'Roboto', sans-serif\",\n      fontSize: \"14px\",\n      fontWeight: 400,\n      lineHeight: \"24px\",\n    },\n    inputLabel: {\n      fontFamily: \"'Roboto', sans-serif\",\n      fontSize: \"12px\",\n      fontWeight: 400,\n      lineHeight: \"16px\",\n    },\n  },\n};\n\n/**\n * Styled editor component with rich text formatting styles\n */\nconst StyledEditor = styled(Box)(({ theme }) => ({\n  padding: `${designTokens.spacing.spacing1} ${designTokens.spacing.spacing1_5}`,\n  paddingTop: theme.spacing(0),\n  outline: \"none\",\n  fontFamily: designTokens.typography.inputText.fontFamily,\n  fontSize: designTokens.typography.inputText.fontSize,\n  fontWeight: designTokens.typography.inputText.fontWeight,\n  lineHeight: designTokens.typography.inputText.lineHeight,\n  color: theme.palette.text.primary,\n  \"& p\": {\n    margin: `${theme.spacing(1)}px 0`,\n    \"&:first-of-type\": { marginTop: 0 },\n    \"&:last-of-type\": { marginBottom: 0 },\n  },\n  \"& h1\": {\n    fontSize: \"2rem\",\n    fontWeight: \"bold\",\n    margin: `${theme.spacing(1.5)}px 0`,\n  },\n  \"& h2\": {\n    fontSize: \"1.5rem\",\n    fontWeight: \"bold\",\n    margin: `${theme.spacing(1)}px 0`,\n  },\n  \"& h3\": {\n    fontSize: \"1.25rem\",\n    fontWeight: \"bold\",\n    margin: `${theme.spacing(1)}px 0`,\n  },\n  \"& ul\": {\n    listStyle: \"disc\",\n    paddingLeft: theme.spacing(3),\n    margin: `${theme.spacing(1)}px 0`,\n  },\n  \"& ol\": {\n    listStyle: \"decimal\",\n    paddingLeft: theme.spacing(3),\n    margin: `${theme.spacing(1)}px 0`,\n  },\n  \"& li\": {\n    margin: `${theme.spacing(0.5)}px 0`,\n  },\n  \"& blockquote\": {\n    borderLeft: `4px solid ${theme.palette.primary.main}`,\n    paddingLeft: theme.spacing(2),\n    fontStyle: \"italic\",\n    margin: `${theme.spacing(2)}px 0`,\n    color: theme.palette.text.secondary,\n  },\n  \"& a\": {\n    color: theme.palette.primary.main,\n    textDecoration: \"underline\",\n    \"&:hover\": {\n      opacity: 0.8,\n    },\n  },\n  \"& strong\": { fontWeight: \"bold\" },\n  \"& em\": { fontStyle: \"italic\" },\n  \"& u\": { textDecoration: \"underline\" },\n}));\n\n/**\n * RichTextEditor component\n * A full-featured rich text editor with toolbar and link management\n */\nexport const RichTextEditor = ({\n  name = \"\",\n  value = \"\",\n  onChange = () => {},\n  onBlur,\n  placeholder = \"Start typing...\",\n  maxChars = null,\n  height = \"auto\",\n  minHeight = \"150px\",\n  maxHeight = null,\n  sx = {},\n  style,\n}) => {\n  // Get MUI theme from parent\n  const theme = useTheme();\n  const isDarkMode = theme.palette.mode === \"dark\";\n\n  // Refs for DOM elements\n  const editorRef = useRef(null);\n  const tooltipRef = useRef(null);\n  const containerRef = useRef(null);\n\n  // State management\n  const [showLinkTooltip, setShowLinkTooltip] = useState(false);\n  const [linkTooltipPosition, setLinkTooltipPosition] = useState({\n    x: 0,\n    y: 0,\n  });\n  const [currentLink, setCurrentLink] = useState(\"\");\n  const [charLeft, setCharLeft] = useState(\n    maxChars ? countContentRealLength(value) : null\n  );\n  const [isLinkEdit, setIsLinkEdit] = useState(false);\n  const [storedRange, setStoredRange] = useState(null);\n  const [isFocused, setIsFocused] = useState(false);\n  const [currentBlockFormat, setCurrentBlockFormat] = useState(\"p\");\n  const [isEmpty, setIsEmpty] = useState(() => {\n    return !value || value === \"<br>\" || value === \"<p><br></p>\";\n  });\n\n  // Current inline format states\n  const [currentInlineFormats, setCurrentInlineFormats] = useState({\n    bold: false,\n    italic: false,\n    underline: false,\n    strikeThrough: false,\n    link: false,\n    unorderedList: false,\n    orderedList: false,\n  });\n\n  // Update editor content when value prop changes\n  useEffect(() => {\n    if (editorRef.current && value !== editorRef.current.innerHTML) {\n      editorRef.current.innerHTML = value;\n    }\n    // Update isEmpty state when value prop changes\n    const contentEmpty = !value || value === \"<br>\" || value === \"<p><br></p>\";\n    setIsEmpty(contentEmpty);\n  }, [value]);\n\n  /**\n   * Update current block format\n   */\n  const updateCurrentBlockFormat = useCallback(() => {\n    if (editorRef.current) {\n      setCurrentBlockFormat(getCurrentBlockFormat());\n    }\n  }, []);\n\n  // Initialize block format on mount\n  useEffect(() => {\n    updateCurrentBlockFormat();\n  }, [updateCurrentBlockFormat]);\n\n  /**\n   * Handle input changes in the editor\n   */\n  const handleInput = useCallback(() => {\n    if (editorRef.current && onChange) {\n      const html = editorRef.current.innerHTML;\n      if (maxChars) {\n        const charLeftLength = countContentRealLength(html);\n        setCharLeft(charLeftLength);\n      }\n      // Update isEmpty state\n      const contentEmpty = !html || html === \"<br>\" || html === \"<p><br></p>\";\n      setIsEmpty(contentEmpty);\n      onChange({ target: { name, value: html } });\n      updateCurrentBlockFormat();\n      updateCurrentInlineFormats();\n    }\n  }, [\n    onChange,\n    name,\n    maxChars,\n    updateCurrentBlockFormat,\n    updateCurrentInlineFormats,\n  ]);\n\n  /**\n   * Handle formatting commands from toolbar\n   * @param {string} command - The formatting command\n   * @param {string} value - Optional value for the command\n   */\n  const handleFormat = useCallback(\n    (command, value) => {\n      if (command === \"createLink\") {\n        const selection = window.getSelection();\n        if (selection && !selection.isCollapsed) {\n          const range = selection.getRangeAt(0).cloneRange();\n          setStoredRange(range);\n          const rect = range.getBoundingClientRect();\n          const editorRect = editorRef.current?.getBoundingClientRect();\n          if (editorRect) {\n            setLinkTooltipPosition({\n              x: rect.left - editorRect.left + rect.width / 2,\n              y: rect.bottom - editorRect.top + 5,\n            });\n            setCurrentLink(\"\");\n            setIsLinkEdit(false);\n            setShowLinkTooltip(true);\n          }\n        } else {\n          const range = selection?.getRangeAt(0);\n          if (range) {\n            setStoredRange(range.cloneRange());\n            const rect = range.getBoundingClientRect();\n            const editorRect = editorRef.current?.getBoundingClientRect();\n            if (editorRect) {\n              setLinkTooltipPosition({\n                x: rect.left - editorRect.left,\n                y: rect.bottom - editorRect.top + 5,\n              });\n              setCurrentLink(\"\");\n              setIsLinkEdit(false);\n              setShowLinkTooltip(true);\n            }\n          }\n        }\n        return;\n      }\n\n      if (command === \"removeFormat\") {\n        document.execCommand(\"removeFormat\", false, null);\n        handleInput();\n        return;\n      }\n\n      applyFormatting(command, value);\n      editorRef.current?.focus();\n      handleInput();\n      updateCurrentBlockFormat();\n      updateCurrentInlineFormats();\n    },\n    [handleInput, updateCurrentInlineFormats, updateCurrentBlockFormat]\n  );\n\n  /**\n   * Handle link submission from tooltip\n   * @param {string} url - The URL to insert\n   */\n  const handleLinkSubmit = useCallback(\n    (url) => {\n      insertLink(url, storedRange || undefined);\n      setShowLinkTooltip(false);\n      setStoredRange(null);\n      handleInput();\n    },\n    [handleInput, storedRange]\n  );\n\n  /**\n   * Handle clicks on links for editing\n   * @param {MouseEvent} e - Click event\n   */\n  const handleClick = useCallback((e) => {\n    const target = e.target;\n    if (target.tagName === \"A\") {\n      e.preventDefault();\n      const range = document.createRange();\n      range.selectNode(target);\n      setStoredRange(range);\n      const rect = target.getBoundingClientRect();\n      const editorRect = editorRef.current?.getBoundingClientRect();\n      if (editorRect) {\n        setLinkTooltipPosition({\n          x: rect.left - editorRect.left + rect.width / 2,\n          y: rect.bottom - editorRect.top + 5,\n        });\n        setCurrentLink(target.getAttribute(\"href\") || \"\");\n        setIsLinkEdit(true);\n        setShowLinkTooltip(true);\n      }\n    } else {\n      setShowLinkTooltip(false);\n    }\n  }, []);\n\n  /**\n   * Handle keyboard shortcuts\n   * @param {KeyboardEvent} e - Keyboard event\n   */\n  const handleKeyDown = useCallback(\n    (e) => {\n      if (e.ctrlKey || e.metaKey) {\n        switch (e.key) {\n          case \"b\":\n            e.preventDefault();\n            handleFormat(\"bold\");\n            break;\n          case \"i\":\n            e.preventDefault();\n            handleFormat(\"italic\");\n            break;\n          case \"u\":\n            e.preventDefault();\n            handleFormat(\"underline\");\n            break;\n          case \"k\":\n            e.preventDefault();\n            handleFormat(\"createLink\");\n            break;\n          case \"s\":\n            e.preventDefault();\n            handleFormat(\"strikeThrough\");\n            break;\n          case \"e\":\n            e.preventDefault();\n            handleFormat(\"removeFormat\");\n            break;\n          case \"z\":\n            e.preventDefault();\n            handleFormat(\"undo\");\n            break;\n          case \"y\":\n            e.preventDefault();\n            handleFormat(\"redo\");\n            break;\n          case \"]\":\n            e.preventDefault();\n            handleFormat(\"indent\");\n            break;\n          case \"[\":\n            e.preventDefault();\n            handleFormat(\"outdent\");\n            break;\n        }\n      }\n\n      if (e.key === \"Escape\") {\n        setShowLinkTooltip(false);\n        setStoredRange(null);\n      }\n    },\n    [handleFormat]\n  );\n\n  /**\n   * Update current inline format states\n   */\n  const updateCurrentInlineFormats = useCallback(() => {\n    updateCurrentBlockFormat();\n    const selection = document.getSelection();\n    if (!selection || !editorRef.current) return;\n    if (!editorRef.current.contains(selection.anchorNode)) return;\n\n    setCurrentInlineFormats({\n      bold: document.queryCommandState(\"bold\"),\n      italic: document.queryCommandState(\"italic\"),\n      underline: document.queryCommandState(\"underline\"),\n      strikeThrough: document.queryCommandState(\"strikeThrough\"),\n      link: document.queryCommandState(\"createLink\"),\n      unorderedList: document.queryCommandState(\"insertUnorderedList\"),\n      orderedList: document.queryCommandState(\"insertOrderedList\"),\n    });\n  }, [updateCurrentBlockFormat]);\n\n  // Add event listeners for selection changes\n  // Note: selectionchange is a document-level event, not element-level\n  useEffect(() => {\n    const updateFormats = () => {\n      updateCurrentBlockFormat();\n      updateCurrentInlineFormats();\n    };\n\n    document.addEventListener(\"selectionchange\", updateFormats);\n\n    return () => {\n      document.removeEventListener(\"selectionchange\", updateFormats);\n    };\n  }, [updateCurrentBlockFormat, updateCurrentInlineFormats]);\n\n  return (\n    <Box\n      ref={containerRef}\n      tabIndex={-1}\n      sx={{\n        border: `1px solid ${maxChars && charLeft > maxChars ? theme.palette.error.main : theme.palette.primary.main}`,\n        borderRadius: designTokens.borderRadius,\n        \"&:focus-within\": {\n          borderColor: maxChars && charLeft > maxChars ? theme.palette.error.main : theme.palette.primary.main,\n        },\n        color: theme.palette.text.primary,\n        backgroundColor: theme.palette.background.paper,\n        fontFamily: designTokens.typography.inputText.fontFamily,\n        ...sx,\n      }}\n      style={style}\n      onBlur={() => {\n        const active = document.activeElement;\n        if (containerRef.current?.contains(active)) return;\n        setIsFocused(false);\n        if (typeof onBlur === \"function\") {\n          onBlur({ target: { value: editorRef.current?.innerHTML } });\n        }\n      }}\n    >\n      {/* Toolbar */}\n      <Toolbar\n        onFormat={handleFormat}\n        showStrikethrough\n        showCleanFormat\n        currentBlockFormat={currentBlockFormat}\n        currentInlineFormats={currentInlineFormats}\n      />\n\n      {/* Editor content area */}\n      <Box style={{ position: \"relative\" }}>\n        <StyledEditor\n          ref={editorRef}\n          contentEditable\n          onFocus={() => setIsFocused(true)}\n          onInput={handleInput}\n          onClick={handleClick}\n          onKeyDown={handleKeyDown}\n          sx={{\n            minHeight,\n            height,\n            maxHeight,\n            overflowY: maxHeight ? \"auto\" : undefined,\n          }}\n          suppressContentEditableWarning\n        />\n\n        {/* Placeholder text */}\n        {isEmpty && !isFocused && (\n          <Box\n            sx={{\n              position: \"absolute\",\n              top: designTokens.spacing.spacing1,\n              left: designTokens.spacing.spacing1_5,\n              color: theme.palette.text.secondary,\n              pointerEvents: \"none\",\n              userSelect: \"none\",\n              fontFamily: designTokens.typography.inputText.fontFamily,\n              fontSize: designTokens.typography.inputText.fontSize,\n              lineHeight: designTokens.typography.inputText.lineHeight,\n            }}\n          >\n            {placeholder}\n          </Box>\n        )}\n\n        {/* Link tooltip */}\n        {showLinkTooltip && (\n          <LinkTooltip\n            position={linkTooltipPosition}\n            onSubmit={handleLinkSubmit}\n            onClose={() => {\n              setShowLinkTooltip(false);\n              setStoredRange(null);\n            }}\n            initialValue={currentLink}\n            isEdit={isLinkEdit}\n            tooltipRef={tooltipRef}\n            storedRange={storedRange}\n          />\n        )}\n\n        {/* Character counter - styled as floating label */}\n        {maxChars && (\n          <Box\n            sx={{\n              position: \"absolute\",\n              bottom: \"-1px\",\n              right: \"11px\",\n              height: \"2px\",\n              display: \"flex\",\n              alignItems: \"center\",\n              padding: \"0 4px\",\n              background: theme.palette.background.paper,\n            }}\n          >\n            <Box\n              sx={{\n                color:\n                  charLeft > maxChars\n                    ? theme.palette.error.main\n                    : theme.palette.primary.main,\n                fontFamily: designTokens.typography.inputLabel.fontFamily,\n                fontSize: designTokens.typography.inputLabel.fontSize,\n                fontWeight: designTokens.typography.inputLabel.fontWeight,\n                lineHeight: designTokens.typography.inputLabel.lineHeight,\n                whiteSpace: \"nowrap\",\n              }}\n            >\n              {`${charLeft}/${maxChars}`}\n            </Box>\n          </Box>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\n// PropTypes for type checking\nRichTextEditor.propTypes = {\n  /** Name attribute for the editor */\n  name: PropTypes.string,\n  /** Current value of the editor */\n  value: PropTypes.string,\n  /** Callback function when content changes */\n  onChange: PropTypes.func,\n  /** Callback function when editor loses focus */\n  onBlur: PropTypes.func,\n  /** Placeholder text when editor is empty */\n  placeholder: PropTypes.string,\n  /** Maximum number of characters allowed */\n  maxChars: PropTypes.number,\n  /** Height of the editor */\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Minimum height of the editor */\n  minHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Maximum height of the editor */\n  maxHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Additional styles for the container */\n  sx: PropTypes.object,\n  /** Additional inline styles */\n  style: PropTypes.object,\n};\n\n// Default props\nRichTextEditor.defaultProps = {\n  name: \"\",\n  value: \"\",\n  onChange: () => {},\n  onBlur: undefined,\n  placeholder: \"Start typing...\",\n  maxChars: null,\n  height: \"auto\",\n  minHeight: \"150px\",\n  maxHeight: null,\n  sx: {},\n  style: undefined,\n};\n"],"names":["applyFormatting","command","value","arguments","length","undefined","document","execCommand","getSelectionInfo","selection","window","getSelection","rangeCount","range","getRangeAt","cloneRange","text","toString","isCollapsed","insertLink","url","removeAllRanges","addRange","linkElement","createElement","href","textContent","target","rel","insertNode","setStartAfter","setEndAfter","querySelectorAll","forEach","link","removeLink","isFormatActive","queryCommandState","getCurrentBlockFormat","sel","anchorNode","node","nodeType","Node","ELEMENT_NODE","parentElement","_node$tagName","tag","tagName","toUpperCase","includes","toLowerCase","blockInside","Array","from","childNodes","find","child","insertHTML","html","deleteContents","div","innerHTML","fragment","createDocumentFragment","firstChild","appendChild","collapse","countContentRealLength","rawText","replace","cleanHTML","el","remove","removeAttribute","LinkTooltip","_ref","position","onSubmit","onClose","_ref$initialValue","initialValue","_ref$isEdit","isEdit","tooltipRef","storedRange","_useState2","_slicedToArray","useState","setUrl","inputRef","useRef","useEffect","setTimeout","current","focus","select","React","Paper","elevation","ref","sx","left","x","top","y","transform","zIndex","p","minWidth","maxWidth","Box","component","display","flexDirection","gap","Typography","variant","fontWeight","TextField","fullWidth","size","onChange","e","onKeyDown","key","placeholder","justifyContent","alignItems","Button","disabled","trim","textTransform","onClick","preventDefault","formattedUrl","match","type","color","propTypes","PropTypes","shape","number","isRequired","func","string","bool","oneOfType","any","object","defaultProps","tokens","spacing0_5","spacing1","small","inputText","fontFamily","fontSize","lineHeight","SelectContainer","styled","SelectInput","paddingLeft","paddingRight","borderRadius","cursor","DataContainer","ContentContainer","overflow","padding","concat","ValueText","theme","palette","secondary","whiteSpace","textOverflow","ButtonContainer","IconWrapper","_ref2","open","height","transition","CustomSelect","_ref3","_ref3$options","options","_ref3$placeholder","_ref3$disabled","_ref3$sx","useTheme","setOpen","anchorRef","selectedOption","opt","displayValue","label","handleClick","handleClose","tabIndex","role","opacity","pointerEvents","ExpandMoreIcon","Popover","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","slotProps","paper","mt","backgroundColor","background","boxShadow","py","map","option","MenuItem","optionValue","selected","minHeight","pl","pr","action","hover","arrayOf","Toolbar","onFormat","_ref$showStrikethroug","showStrikethrough","_ref$showCleanFormat","showCleanFormat","_ref$currentBlockForm","currentBlockFormat","_ref$currentInlineFor","currentInlineFormats","toolbarButtons","icon","FormatBoldRounded","title","group","FormatItalicRounded","FormatUnderlined","StrikethroughS","LinkIcon","FormatClear","filter","Boolean","listButtons","FormatListBulletedRoundedIcon","FormatListNumberedRoundedIcon","indentButtons","FormatIndentDecreaseRoundedIcon","FormatIndentIncreaseRoundedIcon","handleButtonClick","flexWrap","event","Divider","orientation","flexItem","mx","Icon","active","Tooltip","IconButton","primary","main","bgcolor","_ref4","unorderedList","orderedList","_ref5","bold","italic","underline","strikeThrough","designTokens","spacing1_5","inputLabel","StyledEditor","paddingTop","spacing","outline","margin","marginTop","marginBottom","listStyle","borderLeft","fontStyle","textDecoration","RichTextEditor","_ref2$name","name","_ref2$value","_ref2$onChange","onBlur","_ref2$placeholder","_ref2$maxChars","maxChars","_ref2$height","_ref2$minHeight","_ref2$maxHeight","maxHeight","_ref2$sx","style","mode","editorRef","containerRef","showLinkTooltip","setShowLinkTooltip","_useState4","linkTooltipPosition","setLinkTooltipPosition","_useState6","currentLink","setCurrentLink","_useState8","charLeft","setCharLeft","_useState0","isLinkEdit","setIsLinkEdit","_useState10","setStoredRange","_useState12","isFocused","setIsFocused","_useState14","setCurrentBlockFormat","_useState16","isEmpty","setIsEmpty","_useState18","setCurrentInlineFormats","updateCurrentBlockFormat","useCallback","handleInput","charLeftLength","updateCurrentInlineFormats","handleFormat","_editorRef$current3","_editorRef$current","rect","getBoundingClientRect","editorRect","width","bottom","_editorRef$current2","handleLinkSubmit","_editorRef$current4","createRange","selectNode","getAttribute","handleKeyDown","ctrlKey","metaKey","contains","updateFormats","addEventListener","removeEventListener","_objectSpread","border","error","borderColor","_containerRef$current","_editorRef$current5","activeElement","contentEditable","onFocus","onInput","overflowY","suppressContentEditableWarning","userSelect","right"],"mappings":"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"}