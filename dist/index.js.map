{"version":3,"file":"index.js","sources":["../src/utils/editorsUtils.js","../src/LinkTooltip.jsx","../src/CustomSelect.jsx","../src/Toolbar.jsx","../src/RichtextEditor.jsx"],"sourcesContent":["/**\n * Utility functions for rich text editor operations\n * Provides formatting, selection, and content manipulation functions\n */\n\n/**\n * Apply formatting to the selected text\n * @param {string} command - The formatting command\n * @param {string} value - Optional value for the command\n */\nexport const applyFormatting = (command, value = null) => {\n  document.execCommand(command, false, value);\n};\n\n/**\n * Get information about the current selection\n * @returns {object|null} Selection information or null if no selection\n */\nexport const getSelectionInfo = () => {\n  const selection = window.getSelection();\n  if (!selection || selection.rangeCount === 0) {\n    return null;\n  }\n\n  const range = selection.getRangeAt(0);\n  return {\n    selection,\n    range: range.cloneRange(),\n    text: selection.toString(),\n    isCollapsed: selection.isCollapsed,\n  };\n};\n\n/**\n * Insert a link at the specified range or current selection\n * @param {string} url - The URL to insert\n * @param {Range} range - Optional range to insert at\n */\nexport const insertLink = (url, range = null) => {\n  const selection = window.getSelection();\n\n  if (range) {\n    // Restore the stored range\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n\n  if (selection.isCollapsed) {\n    // No text selected, insert the URL as both text and link\n    const linkElement = document.createElement(\"a\");\n    linkElement.href = url;\n    linkElement.textContent = url;\n    linkElement.target = \"_blank\";\n    linkElement.rel = \"noopener noreferrer\";\n\n    range.insertNode(linkElement);\n    range.setStartAfter(linkElement);\n    range.setEndAfter(linkElement);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  } else {\n    // Text is selected, convert it to a link\n    document.execCommand(\"createLink\", false, url);\n\n    // Set target and rel attributes for the created link\n    const links = document.querySelectorAll('a[href=\"' + url + '\"]');\n    links.forEach((link) => {\n      link.target = \"_blank\";\n      link.rel = \"noopener noreferrer\";\n    });\n  }\n};\n\n/**\n * Remove link formatting from the current selection\n */\nexport const removeLink = () => {\n  document.execCommand(\"unlink\");\n};\n\n/**\n * Check if the current selection has specific formatting\n * @param {string} command - The formatting command to check\n * @returns {boolean} Whether the formatting is active\n */\nexport const isFormatActive = (command) => {\n  return document.queryCommandState(command);\n};\n\n/**\n * Get the current format block type\n * @returns {string} The current block format (h1, h2, h3, h4, h5, h6, p, blockquote)\n */\nexport const getCurrentBlockFormat = () => {\n  const sel = window.getSelection();\n  if (!sel?.anchorNode) return \"p\";\n\n  let node =\n    sel.anchorNode.nodeType === Node.ELEMENT_NODE\n      ? sel.anchorNode\n      : sel.anchorNode.parentElement;\n\n  while (node) {\n    const tag = node.tagName?.toUpperCase();\n\n    if ([\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\", \"P\", \"BLOCKQUOTE\"].includes(tag)) {\n      return tag.toLowerCase();\n    }\n\n    // If we're in a list item, look inside it for block-level content\n    if (tag === \"LI\") {\n      const blockInside = Array.from(node.childNodes).find(\n        (child) =>\n          child.nodeType === Node.ELEMENT_NODE &&\n          [\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\", \"P\"].includes(child.tagName)\n      );\n\n      if (blockInside) {\n        return blockInside.tagName.toLowerCase();\n      }\n\n      return \"p\"; // Default block inside list item\n    }\n\n    node = node.parentElement;\n  }\n\n  return \"p\";\n};\n\n/**\n * Insert HTML at the current cursor position\n * @param {string} html - The HTML to insert\n */\nexport const insertHTML = (html) => {\n  const selection = window.getSelection();\n  if (selection.rangeCount > 0) {\n    const range = selection.getRangeAt(0);\n    range.deleteContents();\n\n    const div = document.createElement(\"div\");\n    div.innerHTML = html;\n    const fragment = document.createDocumentFragment();\n\n    while (div.firstChild) {\n      fragment.appendChild(div.firstChild);\n    }\n\n    range.insertNode(fragment);\n    range.collapse(false);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n};\n\n/**\n * Get the plain text content from HTML and count characters\n * @param {string} rawText - The HTML content\n * @returns {number} Character count of plain text content\n */\nexport const countContentRealLength = (rawText) => {\n  if (!rawText) return 0;\n\n  // Remove HTML tags using a regular expression\n  const textContent = rawText.replace(/<\\/?[^>]+(>|$)/g, \"\");\n\n  // Count the length of the cleaned content\n  const characterCount = textContent.length;\n\n  return characterCount;\n};\n\n/**\n * Clean up HTML content by removing unnecessary tags and attributes\n * @param {string} html - The HTML to clean\n * @returns {string} Cleaned HTML\n */\nexport const cleanHTML = (html) => {\n  if (!html) return \"\";\n\n  // Create a temporary div to parse the HTML\n  const div = document.createElement(\"div\");\n  div.innerHTML = html;\n\n  // Remove empty paragraphs and divs\n  const emptyElements = div.querySelectorAll(\"p:empty, div:empty\");\n  emptyElements.forEach((el) => el.remove());\n\n  // Remove style attributes (keep only semantic formatting)\n  const elementsWithStyle = div.querySelectorAll(\"[style]\");\n  elementsWithStyle.forEach((el) => el.removeAttribute(\"style\"));\n\n  return div.innerHTML;\n};\n","import React, { useEffect, useRef, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box, Button, Paper, TextField, Typography } from \"@mui/material\";\n\n/**\n * LinkTooltip component for inserting and editing links\n * Provides a modal-like interface for link management\n */\nexport const LinkTooltip = ({\n  position,\n  onSubmit,\n  onClose,\n  initialValue = \"\",\n  isEdit = false,\n  tooltipRef,\n  storedRange,\n}) => {\n  const [url, setUrl] = useState(initialValue);\n  const inputRef = useRef(null);\n\n  // Focus and select input when component mounts or initialValue changes\n  useEffect(() => {\n    setUrl(initialValue);\n    // Focus the input after a brief delay to ensure it's rendered\n    setTimeout(() => {\n      if (inputRef.current && typeof inputRef.current.focus === \"function\") {\n        inputRef.current.focus();\n      }\n      if (inputRef.current && typeof inputRef.current.select === \"function\") {\n        inputRef.current.select();\n      }\n    }, 50);\n  }, [initialValue]);\n\n  /**\n   * Handle form submission\n   * @param {Event} e - Form submission event\n   */\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (url.trim()) {\n      let formattedUrl = url.trim();\n      // Add https:// if no protocol is specified\n      if (!formattedUrl.match(/^https?:\\/\\//)) {\n        formattedUrl = \"https://\" + formattedUrl;\n      }\n      onSubmit(formattedUrl);\n    }\n  };\n\n  /**\n   * Handle keyboard events\n   * @param {KeyboardEvent} e - Keyboard event\n   */\n  const handleKeyDown = (e) => {\n    if (e.key === \"Escape\") {\n      onClose();\n    }\n  };\n\n  /**\n   * Handle link removal\n   * Restores selection and removes the link\n   */\n  const handleRemoveLink = () => {\n    if (storedRange) {\n      const selection = window.getSelection();\n      selection.removeAllRanges();\n      selection.addRange(storedRange);\n    }\n    document.execCommand(\"unlink\");\n    onClose();\n  };\n\n  return (\n    <Paper\n      elevation={4}\n      ref={tooltipRef}\n      sx={{\n        position: \"absolute\",\n        left: position.x,\n        top: position.y,\n        transform: \"translateX(-50%)\",\n        zIndex: 1000,\n        p: 2,\n        minWidth: 320,\n        maxWidth: 400,\n      }}\n    >\n      <Box\n        component=\"form\"\n        sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}\n      >\n        <Typography variant=\"subtitle2\" sx={{ fontWeight: 600 }}>\n          {isEdit ? \"Edit Link\" : \"Insert Link\"}\n        </Typography>\n\n        <TextField\n          inputRef={inputRef}\n          fullWidth\n          size=\"small\"\n          value={url}\n          onChange={(e) => setUrl(e.target.value)}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Enter URL (e.g., https://example.com)\"\n          variant=\"outlined\"\n        />\n\n        <Box\n          sx={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n          }}\n        >\n          <Box sx={{ display: \"flex\", gap: 1 }}>\n            <Button\n              variant=\"contained\"\n              size=\"small\"\n              disabled={!url.trim()}\n              sx={{ textTransform: \"none\" }}\n              onClick={handleSubmit}\n            >\n              {isEdit ? \"Update\" : \"Insert\"}\n            </Button>\n            <Button\n              type=\"button\"\n              variant=\"outlined\"\n              size=\"small\"\n              onClick={onClose}\n              sx={{ textTransform: \"none\" }}\n            >\n              Cancel\n            </Button>\n          </Box>\n\n          {isEdit && (\n            <Button\n              type=\"button\"\n              variant=\"contained\"\n              color=\"error\"\n              size=\"small\"\n              onClick={handleRemoveLink}\n              sx={{ textTransform: \"none\" }}\n            >\n              Remove\n            </Button>\n          )}\n        </Box>\n      </Box>\n    </Paper>\n  );\n};\n\n// PropTypes for type checking\nLinkTooltip.propTypes = {\n  /** Position object with x and y coordinates */\n  position: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n  }).isRequired,\n  /** Callback function when link is submitted */\n  onSubmit: PropTypes.func.isRequired,\n  /** Callback function when tooltip is closed */\n  onClose: PropTypes.func.isRequired,\n  /** Initial URL value for the input field */\n  initialValue: PropTypes.string,\n  /** Whether the tooltip is in edit mode */\n  isEdit: PropTypes.bool,\n  /** Ref for the tooltip container */\n  tooltipRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.any }),\n  ]),\n  /** Stored range for link editing */\n  storedRange: PropTypes.object,\n};\n\n// Default props\nLinkTooltip.defaultProps = {\n  initialValue: \"\",\n  isEdit: false,\n  tooltipRef: null,\n  storedRange: null,\n};\n","import React, { useState, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box, Popover, MenuItem } from \"@mui/material\";\nimport { styled, useTheme } from \"@mui/material/styles\";\nimport { ExpandMore as ExpandMoreIcon } from \"@mui/icons-material\";\n\n/**\n * Design tokens from Figma (node-id: 32:54592)\n */\nconst tokens = {\n  spacing: {\n    spacing0_5: \"4px\",\n    spacing1: \"8px\",\n  },\n  radius: {\n    small: \"4px\",\n  },\n  typography: {\n    inputText: {\n      fontFamily: \"'Roboto', sans-serif\",\n      fontSize: \"14px\",\n      fontWeight: 400,\n      lineHeight: \"24px\",\n    },\n  },\n};\n\n/**\n * Styled container matching Figma design (node-id: 32:54592)\n */\nconst SelectContainer = styled(Box)({\n  position: \"relative\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"flex-start\",\n});\n\nconst SelectInput = styled(Box)({\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"flex-start\",\n  paddingLeft: tokens.spacing.spacing1,\n  paddingRight: 0,\n  borderRadius: tokens.radius.small,\n  cursor: \"pointer\",\n});\n\nconst DataContainer = styled(Box)({\n  display: \"flex\",\n  alignItems: \"flex-end\",\n  justifyContent: \"flex-end\",\n  gap: tokens.spacing.spacing0_5,\n});\n\nconst ContentContainer = styled(Box)({\n  display: \"flex\",\n  alignItems: \"flex-start\",\n  gap: tokens.spacing.spacing1,\n  overflow: \"hidden\",\n  padding: `${tokens.spacing.spacing0_5} 0`,\n});\n\nconst ValueText = styled(\"span\")(({ theme }) => ({\n  fontFamily: tokens.typography.inputText.fontFamily,\n  fontSize: tokens.typography.inputText.fontSize,\n  fontWeight: tokens.typography.inputText.fontWeight,\n  lineHeight: tokens.typography.inputText.lineHeight,\n  color: theme.palette.text.secondary,\n  whiteSpace: \"nowrap\",\n  overflow: \"hidden\",\n  textOverflow: \"ellipsis\",\n}));\n\nconst ButtonContainer = styled(Box)({\n  display: \"flex\",\n  alignItems: \"flex-end\",\n  justifyContent: \"center\",\n  padding: `0 ${tokens.spacing.spacing0_5}`,\n});\n\nconst IconWrapper = styled(Box)(({ open }) => ({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  height: \"32px\",\n  padding: `${tokens.spacing.spacing1} 0`,\n  borderRadius: tokens.radius.small,\n  \"& > div\": {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: tokens.spacing.spacing0_5,\n    borderRadius: tokens.radius.small,\n    overflow: \"hidden\",\n    transition: \"transform 0.2s ease\",\n    transform: open ? \"rotate(180deg)\" : \"rotate(0deg)\",\n  },\n}));\n\n/**\n * CustomSelect component matching Figma design (node-id: 32:54592)\n * A minimal styled select dropdown without border\n */\nexport const CustomSelect = ({\n  value,\n  options = [],\n  onChange,\n  placeholder = \"Select...\",\n  disabled = false,\n  sx = {},\n}) => {\n  const theme = useTheme();\n  const [open, setOpen] = useState(false);\n  const anchorRef = useRef(null);\n\n  const selectedOption = options.find((opt) => opt.value === value);\n  const displayValue = selectedOption?.label || placeholder;\n\n  const handleClick = () => {\n    if (!disabled) {\n      setOpen(true);\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleSelect = (optionValue) => {\n    if (onChange) {\n      onChange({ target: { value: optionValue } });\n    }\n    handleClose();\n  };\n\n  return (\n    <SelectContainer sx={sx}>\n      <SelectInput\n        ref={anchorRef}\n        onClick={handleClick}\n        tabIndex={disabled ? -1 : 0}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            handleClick();\n          }\n        }}\n        role=\"combobox\"\n        aria-expanded={open}\n        aria-haspopup=\"listbox\"\n        sx={{\n          opacity: disabled ? 0.5 : 1,\n          pointerEvents: disabled ? \"none\" : \"auto\",\n        }}\n      >\n        <DataContainer>\n          <ContentContainer>\n            <ValueText>{displayValue}</ValueText>\n          </ContentContainer>\n          <ButtonContainer>\n            <IconWrapper open={open}>\n              <div>\n                <ExpandMoreIcon\n                  sx={{\n                    fontSize: 24,\n                    color: theme.palette.text.secondary,\n                  }}\n                />\n              </div>\n            </IconWrapper>\n          </ButtonContainer>\n        </DataContainer>\n      </SelectInput>\n\n      <Popover\n        open={open}\n        anchorEl={anchorRef.current}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"left\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"left\",\n        }}\n        slotProps={{\n          paper: {\n            sx: {\n              mt: 0.5,\n              minWidth: 200,\n              borderRadius: tokens.radius.small,\n              backgroundColor: theme.palette.background.paper,\n              boxShadow: \"0px 4px 16px rgba(29, 29, 43, 0.4)\",\n            },\n          },\n        }}\n      >\n        <Box sx={{ py: \"4px\" }}>\n          {options.map((option) => (\n            <MenuItem\n              key={option.value}\n              onClick={() => handleSelect(option.value)}\n              selected={option.value === value}\n              sx={{\n                height: \"28px\",\n                minHeight: \"28px\",\n                minWidth: 200,\n                pl: \"16px\",\n                pr: \"12px\",\n                py: 0,\n                fontFamily: tokens.typography.inputText.fontFamily,\n                fontSize: tokens.typography.inputText.fontSize,\n                fontWeight: tokens.typography.inputText.fontWeight,\n                lineHeight: \"16px\",\n                color: theme.palette.text.secondary,\n                \"&.Mui-selected\": {\n                  backgroundColor: theme.palette.action.selected,\n                },\n                \"&.Mui-selected:hover\": {\n                  backgroundColor: theme.palette.action.hover,\n                },\n                \"&:hover\": {\n                  backgroundColor: theme.palette.action.hover,\n                },\n              }}\n            >\n              {option.label}\n            </MenuItem>\n          ))}\n        </Box>\n      </Popover>\n    </SelectContainer>\n  );\n};\n\nCustomSelect.propTypes = {\n  /** Current selected value */\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Array of options: [{ value: string, label: string }] */\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n        .isRequired,\n      label: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  /** Callback when value changes */\n  onChange: PropTypes.func,\n  /** Placeholder text when no value selected */\n  placeholder: PropTypes.string,\n  /** Whether the select is disabled */\n  disabled: PropTypes.bool,\n  /** Additional styles */\n  sx: PropTypes.object,\n};\n\nCustomSelect.defaultProps = {\n  value: undefined,\n  onChange: undefined,\n  placeholder: \"Select...\",\n  disabled: false,\n  sx: {},\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  FormatIndentIncreaseRounded as FormatIndentIncreaseRoundedIcon,\n  FormatIndentDecreaseRounded as FormatIndentDecreaseRoundedIcon,\n  FormatListBulletedRounded as FormatListBulletedRoundedIcon,\n  FormatListNumberedRounded as FormatListNumberedRoundedIcon,\n  FormatBoldRounded,\n  FormatItalicRounded,\n  FormatUnderlined,\n  StrikethroughS,\n  Link as LinkIcon,\n  FormatClear,\n} from \"@mui/icons-material\";\n\nimport { Box, Divider, IconButton, Tooltip } from \"@mui/material\";\nimport { useTheme } from \"@mui/material/styles\";\nimport { CustomSelect } from \"./CustomSelect\";\n\n/**\n * Toolbar component for the rich text editor\n * Provides formatting controls including text formatting, headings, lists, and indentation\n */\nexport const Toolbar = ({\n  onFormat,\n  showStrikethrough = false,\n  showCleanFormat = false,\n  currentBlockFormat = \"p\",\n  currentInlineFormats = {},\n}) => {\n  // Get MUI theme from parent\n  const theme = useTheme();\n\n  // Define toolbar buttons configuration\n  const toolbarButtons = [\n    {\n      command: \"bold\",\n      icon: FormatBoldRounded,\n      title: \"Bold (Ctrl+B)\",\n      group: \"text\",\n    },\n    {\n      command: \"italic\",\n      icon: FormatItalicRounded,\n      title: \"Italic (Ctrl+I)\",\n      group: \"text\",\n    },\n    {\n      command: \"underline\",\n      icon: FormatUnderlined,\n      title: \"Underline (Ctrl+U)\",\n      group: \"text\",\n    },\n    showStrikethrough && {\n      command: \"strikeThrough\",\n      icon: StrikethroughS,\n      title: \"Strikethrough (Ctrl+S)\",\n      group: \"text\",\n    },\n    {\n      command: \"createLink\",\n      icon: LinkIcon,\n      title: \"Insert Link (Ctrl+K)\",\n      group: \"link\",\n    },\n    showCleanFormat && {\n      command: \"removeFormat\",\n      icon: FormatClear,\n      title: \"Remove Formatting (Ctrl+E)\",\n      group: \"clean\",\n    },\n  ].filter(Boolean);\n\n  // Define heading format options\n  const formatButtons = [\n    {\n      command: \"formatBlock\",\n      value: \"h1\",\n      label: \"Heading 1\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"h2\",\n      label: \"Heading 2\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"h3\",\n      label: \"Heading 3\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"h4\",\n      label: \"Heading 4\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"h5\",\n      label: \"Heading 5\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"h6\",\n      label: \"Heading 6\",\n      group: \"heading\",\n    },\n    {\n      command: \"formatBlock\",\n      value: \"p\",\n      label: \"Paragraph\",\n      group: \"heading\",\n    },\n  ];\n\n  // Define list formatting options\n  const listButtons = [\n    {\n      command: \"insertUnorderedList\",\n      label: \"â€¢ List\",\n      group: \"list\",\n      icon: FormatListBulletedRoundedIcon,\n    },\n    {\n      command: \"insertOrderedList\",\n      label: \"1. List\",\n      group: \"list\",\n      icon: FormatListNumberedRoundedIcon,\n    },\n  ];\n\n  // Define indentation controls\n  const indentButtons = [\n    {\n      command: \"outdent\",\n      label: \"Outdent\",\n      group: \"indent\",\n      icon: FormatIndentDecreaseRoundedIcon,\n    },\n    {\n      command: \"indent\",\n      label: \"Indent\",\n      group: \"indent\",\n      icon: FormatIndentIncreaseRoundedIcon,\n    },\n  ];\n\n  /**\n   * Handle button click events\n   * @param {string} command - The formatting command to execute\n   * @param {string} value - Optional value for the command\n   */\n  const handleButtonClick = (command, value) => {\n    onFormat(command, value);\n  };\n\n  /**\n   * Handle menu item selection for heading dropdown\n   * @param {string} command - The formatting command\n   * @param {string} value - The selected value\n   */\n  const handleMenuItemClick = (command, value) => {\n    onFormat(command, value);\n  };\n\n  return (\n    <Box\n      sx={{\n        p: \"0.5rem 1rem\",\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        alignItems: \"center\",\n        gap: 0.5,\n      }}\n    >\n      {/* Heading dropdown */}\n      <CustomSelect\n        value={currentBlockFormat}\n        options={formatButtons.map(({ value, label }) => ({\n          value,\n          label,\n        }))}\n        onChange={(event) =>\n          handleMenuItemClick(\"formatBlock\", event.target.value)\n        }\n        sx={{ minWidth: 120 }}\n      />\n\n      <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\n\n      {/* Text formatting buttons */}\n      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 0.5 }}>\n        {toolbarButtons.map(({ command, icon: Icon, title }) => {\n          const active = currentInlineFormats?.[command] || false;\n          return (\n            <Tooltip key={command} title={title}>\n              <IconButton\n                onClick={() => handleButtonClick(command)}\n                size=\"small\"\n                sx={{\n                  borderRadius: \"4px\",\n                  color: active\n                    ? theme.palette.primary.main\n                    : theme.palette.text.secondary,\n                  bgcolor: active ? \"action.selected\" : undefined,\n                  \"&:hover\": { bgcolor: theme.palette.action.hover },\n                  \"&:active\": { bgcolor: theme.palette.action.selected },\n                }}\n              >\n                <Icon fontSize=\"medium\" />\n              </IconButton>\n            </Tooltip>\n          );\n        })}\n      </Box>\n\n      <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\n\n      {/* List and quote buttons */}\n      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 0.5 }}>\n        {listButtons.map(({ command, value, label, icon: Icon }) => {\n          let active = false;\n          if (command === \"formatBlock\" && value === \"blockquote\") {\n            active = currentBlockFormat === \"blockquote\";\n          } else if (command === \"insertUnorderedList\") {\n            active = currentInlineFormats.unorderedList;\n          } else if (command === \"insertOrderedList\") {\n            active = currentInlineFormats.orderedList;\n          }\n\n          return (\n            <Tooltip key={command} title={label}>\n              <IconButton\n                onClick={() => handleButtonClick(command)}\n                size=\"small\"\n                sx={{\n                  borderRadius: \"4px\",\n                  color: active\n                    ? theme.palette.primary.main\n                    : theme.palette.text.secondary,\n                  bgcolor: active ? \"action.selected\" : undefined,\n                  \"&:hover\": { bgcolor: theme.palette.action.hover },\n                  \"&:active\": { bgcolor: theme.palette.action.selected },\n                }}\n              >\n                <Icon fontSize=\"medium\" />\n              </IconButton>\n            </Tooltip>\n          );\n        })}\n      </Box>\n\n      <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\n\n      {/* Indentation controls */}\n      <Box\n        sx={{\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: 0.5,\n        }}\n      >\n        {indentButtons.map(({ command, label, icon: Icon }) => {\n          const active = currentInlineFormats?.[command] || false;\n          return (\n            <Tooltip key={command} title={label}>\n              <IconButton\n                onClick={() => handleButtonClick(command)}\n                size=\"small\"\n                sx={{\n                  borderRadius: \"4px\",\n                  color: active\n                    ? theme.palette.primary.main\n                    : theme.palette.text.secondary,\n                  bgcolor: active ? \"action.selected\" : undefined,\n                  \"&:hover\": { bgcolor: theme.palette.action.hover },\n                  \"&:active\": { bgcolor: theme.palette.action.selected },\n                }}\n              >\n                <Icon fontSize=\"medium\" />\n              </IconButton>\n            </Tooltip>\n          );\n        })}\n      </Box>\n    </Box>\n  );\n};\n\n// PropTypes for type checking\nToolbar.propTypes = {\n  /** Callback function for formatting commands */\n  onFormat: PropTypes.func.isRequired,\n  /** Whether to show strikethrough button */\n  showStrikethrough: PropTypes.bool,\n  /** Whether to show clean format button */\n  showCleanFormat: PropTypes.bool,\n  /** Current block format (h1, h2, h3, h4, h5, h6, p) */\n  currentBlockFormat: PropTypes.string,\n  /** Object containing current inline format states */\n  currentInlineFormats: PropTypes.shape({\n    bold: PropTypes.bool,\n    italic: PropTypes.bool,\n    underline: PropTypes.bool,\n    strikeThrough: PropTypes.bool,\n    link: PropTypes.bool,\n    unorderedList: PropTypes.bool,\n    orderedList: PropTypes.bool,\n  }),\n};\n\n// Default props\nToolbar.defaultProps = {\n  showStrikethrough: false,\n  showCleanFormat: false,\n  currentBlockFormat: \"p\",\n  currentInlineFormats: {},\n};\n","import React, { useCallback, useRef, useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box } from \"@mui/material\";\nimport { styled, useTheme } from \"@mui/material/styles\";\nimport {\n  applyFormatting,\n  insertLink,\n  countContentRealLength,\n  getCurrentBlockFormat,\n} from \"./utils/editorsUtils\";\nimport { LinkTooltip } from \"./LinkTooltip\";\nimport { Toolbar } from \"./Toolbar\";\n\n/**\n * Design tokens from Figma\n */\nconst designTokens = {\n  colors: {\n    borderPrimary: \"#0b89d1\",\n    textDefault: \"#536886\",\n    textPrimary: \"#0b89d1\",\n    surfaceBase: \"#ffffff\",\n  },\n  spacing: {\n    spacing1: \"8px\",\n    spacing1_5: \"12px\",\n  },\n  borderRadius: \"4px\",\n  typography: {\n    inputText: {\n      fontFamily: \"'Roboto', sans-serif\",\n      fontSize: \"14px\",\n      fontWeight: 400,\n      lineHeight: \"24px\",\n    },\n    inputLabel: {\n      fontFamily: \"'Roboto', sans-serif\",\n      fontSize: \"12px\",\n      fontWeight: 400,\n      lineHeight: \"16px\",\n    },\n  },\n};\n\n/**\n * Styled editor component with rich text formatting styles\n */\nconst StyledEditor = styled(Box)(({ theme }) => ({\n  padding: `${designTokens.spacing.spacing1} ${designTokens.spacing.spacing1_5}`,\n  paddingTop: theme.spacing(0),\n  outline: \"none\",\n  fontFamily: designTokens.typography.inputText.fontFamily,\n  fontSize: designTokens.typography.inputText.fontSize,\n  fontWeight: designTokens.typography.inputText.fontWeight,\n  lineHeight: designTokens.typography.inputText.lineHeight,\n  color: theme.palette.text.primary,\n  \"& p\": {\n    margin: `${theme.spacing(1)}px 0`,\n    \"&:first-of-type\": { marginTop: 0 },\n    \"&:last-of-type\": { marginBottom: 0 },\n  },\n  \"& h1\": {\n    fontSize: \"2rem\",\n    fontWeight: \"bold\",\n    margin: `${theme.spacing(1.5)}px 0`,\n  },\n  \"& h2\": {\n    fontSize: \"1.5rem\",\n    fontWeight: \"bold\",\n    margin: `${theme.spacing(1)}px 0`,\n  },\n  \"& h3\": {\n    fontSize: \"1.25rem\",\n    fontWeight: \"bold\",\n    margin: `${theme.spacing(1)}px 0`,\n  },\n  \"& ul\": {\n    listStyle: \"disc\",\n    paddingLeft: theme.spacing(3),\n    margin: `${theme.spacing(1)}px 0`,\n  },\n  \"& ol\": {\n    listStyle: \"decimal\",\n    paddingLeft: theme.spacing(3),\n    margin: `${theme.spacing(1)}px 0`,\n  },\n  \"& li\": {\n    margin: `${theme.spacing(0.5)}px 0`,\n  },\n  \"& blockquote\": {\n    borderLeft: `4px solid ${theme.palette.primary.main}`,\n    paddingLeft: theme.spacing(2),\n    fontStyle: \"italic\",\n    margin: `${theme.spacing(2)}px 0`,\n    color: theme.palette.text.secondary,\n  },\n  \"& a\": {\n    color: theme.palette.primary.main,\n    textDecoration: \"underline\",\n    \"&:hover\": {\n      opacity: 0.8,\n    },\n  },\n  \"& strong\": { fontWeight: \"bold\" },\n  \"& em\": { fontStyle: \"italic\" },\n  \"& u\": { textDecoration: \"underline\" },\n}));\n\n/**\n * RichTextEditor component\n * A full-featured rich text editor with toolbar and link management\n */\nexport const RichTextEditor = ({\n  name = \"\",\n  value = \"\",\n  onChange = () => {},\n  onBlur,\n  placeholder = \"Start typing...\",\n  maxChars = null,\n  height = \"auto\",\n  minHeight = \"150px\",\n  maxHeight = null,\n  sx = {},\n  style,\n}) => {\n  // Get MUI theme from parent\n  const theme = useTheme();\n  const isDarkMode = theme.palette.mode === \"dark\";\n\n  // Refs for DOM elements\n  const editorRef = useRef(null);\n  const tooltipRef = useRef(null);\n  const containerRef = useRef(null);\n\n  // State management\n  const [showLinkTooltip, setShowLinkTooltip] = useState(false);\n  const [linkTooltipPosition, setLinkTooltipPosition] = useState({\n    x: 0,\n    y: 0,\n  });\n  const [currentLink, setCurrentLink] = useState(\"\");\n  const [charLeft, setCharLeft] = useState(\n    maxChars ? countContentRealLength(value) : null\n  );\n  const [isLinkEdit, setIsLinkEdit] = useState(false);\n  const [storedRange, setStoredRange] = useState(null);\n  const [isFocused, setIsFocused] = useState(false);\n  const [currentBlockFormat, setCurrentBlockFormat] = useState(\"p\");\n  const [isEmpty, setIsEmpty] = useState(() => {\n    return !value || value === \"<br>\" || value === \"<p><br></p>\";\n  });\n\n  // Current inline format states\n  const [currentInlineFormats, setCurrentInlineFormats] = useState({\n    bold: false,\n    italic: false,\n    underline: false,\n    strikeThrough: false,\n    link: false,\n    unorderedList: false,\n    orderedList: false,\n  });\n\n  // Update editor content when value prop changes\n  useEffect(() => {\n    if (editorRef.current && value !== editorRef.current.innerHTML) {\n      editorRef.current.innerHTML = value;\n    }\n    // Update isEmpty state when value prop changes\n    const contentEmpty = !value || value === \"<br>\" || value === \"<p><br></p>\";\n    setIsEmpty(contentEmpty);\n  }, [value]);\n\n  /**\n   * Update current block format\n   */\n  const updateCurrentBlockFormat = useCallback(() => {\n    if (editorRef.current) {\n      setCurrentBlockFormat(getCurrentBlockFormat());\n    }\n  }, []);\n\n  // Initialize block format on mount\n  useEffect(() => {\n    updateCurrentBlockFormat();\n  }, [updateCurrentBlockFormat]);\n\n  /**\n   * Handle input changes in the editor\n   */\n  const handleInput = useCallback(() => {\n    if (editorRef.current && onChange) {\n      const html = editorRef.current.innerHTML;\n      if (maxChars) {\n        const charLeftLength = countContentRealLength(html);\n        setCharLeft(charLeftLength);\n      }\n      // Update isEmpty state\n      const contentEmpty = !html || html === \"<br>\" || html === \"<p><br></p>\";\n      setIsEmpty(contentEmpty);\n      onChange({ target: { name, value: html } });\n      updateCurrentBlockFormat();\n      updateCurrentInlineFormats();\n    }\n  }, [\n    onChange,\n    name,\n    maxChars,\n    updateCurrentBlockFormat,\n    updateCurrentInlineFormats,\n  ]);\n\n  /**\n   * Handle formatting commands from toolbar\n   * @param {string} command - The formatting command\n   * @param {string} value - Optional value for the command\n   */\n  const handleFormat = useCallback(\n    (command, value) => {\n      if (command === \"createLink\") {\n        const selection = window.getSelection();\n        if (selection && !selection.isCollapsed) {\n          const range = selection.getRangeAt(0).cloneRange();\n          setStoredRange(range);\n          const rect = range.getBoundingClientRect();\n          const editorRect = editorRef.current?.getBoundingClientRect();\n          if (editorRect) {\n            setLinkTooltipPosition({\n              x: rect.left - editorRect.left + rect.width / 2,\n              y: rect.bottom - editorRect.top + 5,\n            });\n            setCurrentLink(\"\");\n            setIsLinkEdit(false);\n            setShowLinkTooltip(true);\n          }\n        } else {\n          const range = selection?.getRangeAt(0);\n          if (range) {\n            setStoredRange(range.cloneRange());\n            const rect = range.getBoundingClientRect();\n            const editorRect = editorRef.current?.getBoundingClientRect();\n            if (editorRect) {\n              setLinkTooltipPosition({\n                x: rect.left - editorRect.left,\n                y: rect.bottom - editorRect.top + 5,\n              });\n              setCurrentLink(\"\");\n              setIsLinkEdit(false);\n              setShowLinkTooltip(true);\n            }\n          }\n        }\n        return;\n      }\n\n      if (command === \"removeFormat\") {\n        document.execCommand(\"removeFormat\", false, null);\n        handleInput();\n        return;\n      }\n\n      applyFormatting(command, value);\n      editorRef.current?.focus();\n      handleInput();\n      updateCurrentBlockFormat();\n      updateCurrentInlineFormats();\n    },\n    [handleInput, updateCurrentInlineFormats, updateCurrentBlockFormat]\n  );\n\n  /**\n   * Handle link submission from tooltip\n   * @param {string} url - The URL to insert\n   */\n  const handleLinkSubmit = useCallback(\n    (url) => {\n      insertLink(url, storedRange || undefined);\n      setShowLinkTooltip(false);\n      setStoredRange(null);\n      handleInput();\n    },\n    [handleInput, storedRange]\n  );\n\n  /**\n   * Handle clicks on links for editing\n   * @param {MouseEvent} e - Click event\n   */\n  const handleClick = useCallback((e) => {\n    const target = e.target;\n    if (target.tagName === \"A\") {\n      e.preventDefault();\n      const range = document.createRange();\n      range.selectNode(target);\n      setStoredRange(range);\n      const rect = target.getBoundingClientRect();\n      const editorRect = editorRef.current?.getBoundingClientRect();\n      if (editorRect) {\n        setLinkTooltipPosition({\n          x: rect.left - editorRect.left + rect.width / 2,\n          y: rect.bottom - editorRect.top + 5,\n        });\n        setCurrentLink(target.getAttribute(\"href\") || \"\");\n        setIsLinkEdit(true);\n        setShowLinkTooltip(true);\n      }\n    } else {\n      setShowLinkTooltip(false);\n    }\n  }, []);\n\n  /**\n   * Handle keyboard shortcuts\n   * @param {KeyboardEvent} e - Keyboard event\n   */\n  const handleKeyDown = useCallback(\n    (e) => {\n      if (e.ctrlKey || e.metaKey) {\n        switch (e.key) {\n          case \"b\":\n            e.preventDefault();\n            handleFormat(\"bold\");\n            break;\n          case \"i\":\n            e.preventDefault();\n            handleFormat(\"italic\");\n            break;\n          case \"u\":\n            e.preventDefault();\n            handleFormat(\"underline\");\n            break;\n          case \"k\":\n            e.preventDefault();\n            handleFormat(\"createLink\");\n            break;\n          case \"s\":\n            e.preventDefault();\n            handleFormat(\"strikeThrough\");\n            break;\n          case \"e\":\n            e.preventDefault();\n            handleFormat(\"removeFormat\");\n            break;\n          case \"z\":\n            e.preventDefault();\n            handleFormat(\"undo\");\n            break;\n          case \"y\":\n            e.preventDefault();\n            handleFormat(\"redo\");\n            break;\n          case \"]\":\n            e.preventDefault();\n            handleFormat(\"indent\");\n            break;\n          case \"[\":\n            e.preventDefault();\n            handleFormat(\"outdent\");\n            break;\n        }\n      }\n\n      if (e.key === \"Escape\") {\n        setShowLinkTooltip(false);\n        setStoredRange(null);\n      }\n    },\n    [handleFormat]\n  );\n\n  /**\n   * Update current inline format states\n   */\n  const updateCurrentInlineFormats = useCallback(() => {\n    updateCurrentBlockFormat();\n    const selection = document.getSelection();\n    if (!selection || !editorRef.current) return;\n    if (!editorRef.current.contains(selection.anchorNode)) return;\n\n    setCurrentInlineFormats({\n      bold: document.queryCommandState(\"bold\"),\n      italic: document.queryCommandState(\"italic\"),\n      underline: document.queryCommandState(\"underline\"),\n      strikeThrough: document.queryCommandState(\"strikeThrough\"),\n      link: document.queryCommandState(\"createLink\"),\n      unorderedList: document.queryCommandState(\"insertUnorderedList\"),\n      orderedList: document.queryCommandState(\"insertOrderedList\"),\n    });\n  }, [updateCurrentBlockFormat]);\n\n  // Add event listeners for selection changes\n  // Note: selectionchange is a document-level event, not element-level\n  useEffect(() => {\n    const updateFormats = () => {\n      updateCurrentBlockFormat();\n      updateCurrentInlineFormats();\n    };\n\n    document.addEventListener(\"selectionchange\", updateFormats);\n\n    return () => {\n      document.removeEventListener(\"selectionchange\", updateFormats);\n    };\n  }, [updateCurrentBlockFormat, updateCurrentInlineFormats]);\n\n  return (\n    <Box\n      ref={containerRef}\n      tabIndex={-1}\n      sx={{\n        border: `1px solid ${maxChars && charLeft > maxChars ? theme.palette.error.main : theme.palette.primary.main}`,\n        borderRadius: designTokens.borderRadius,\n        \"&:focus-within\": {\n          borderColor: maxChars && charLeft > maxChars ? theme.palette.error.main : theme.palette.primary.main,\n        },\n        color: theme.palette.text.primary,\n        backgroundColor: theme.palette.background.paper,\n        fontFamily: designTokens.typography.inputText.fontFamily,\n        ...sx,\n      }}\n      style={style}\n      onBlur={() => {\n        const active = document.activeElement;\n        if (containerRef.current?.contains(active)) return;\n        setIsFocused(false);\n        if (typeof onBlur === \"function\") {\n          onBlur({ target: { value: editorRef.current?.innerHTML } });\n        }\n      }}\n    >\n      {/* Toolbar */}\n      <Toolbar\n        onFormat={handleFormat}\n        showStrikethrough\n        showCleanFormat\n        currentBlockFormat={currentBlockFormat}\n        currentInlineFormats={currentInlineFormats}\n      />\n\n      {/* Editor content area */}\n      <Box style={{ position: \"relative\" }}>\n        <StyledEditor\n          ref={editorRef}\n          contentEditable\n          onFocus={() => setIsFocused(true)}\n          onInput={handleInput}\n          onClick={handleClick}\n          onKeyDown={handleKeyDown}\n          sx={{\n            minHeight,\n            height,\n            maxHeight,\n            overflowY: maxHeight ? \"auto\" : undefined,\n          }}\n          suppressContentEditableWarning\n        />\n\n        {/* Placeholder text */}\n        {isEmpty && !isFocused && (\n          <Box\n            sx={{\n              position: \"absolute\",\n              top: designTokens.spacing.spacing1,\n              left: designTokens.spacing.spacing1_5,\n              color: theme.palette.text.secondary,\n              pointerEvents: \"none\",\n              userSelect: \"none\",\n              fontFamily: designTokens.typography.inputText.fontFamily,\n              fontSize: designTokens.typography.inputText.fontSize,\n              lineHeight: designTokens.typography.inputText.lineHeight,\n            }}\n          >\n            {placeholder}\n          </Box>\n        )}\n\n        {/* Link tooltip */}\n        {showLinkTooltip && (\n          <LinkTooltip\n            position={linkTooltipPosition}\n            onSubmit={handleLinkSubmit}\n            onClose={() => {\n              setShowLinkTooltip(false);\n              setStoredRange(null);\n            }}\n            initialValue={currentLink}\n            isEdit={isLinkEdit}\n            tooltipRef={tooltipRef}\n            storedRange={storedRange}\n          />\n        )}\n\n        {/* Character counter - styled as floating label */}\n        {maxChars && (\n          <Box\n            sx={{\n              position: \"absolute\",\n              bottom: \"-1px\",\n              right: \"11px\",\n              height: \"2px\",\n              display: \"flex\",\n              alignItems: \"center\",\n              padding: \"0 4px\",\n              background: theme.palette.background.paper,\n            }}\n          >\n            <Box\n              sx={{\n                color:\n                  charLeft > maxChars\n                    ? theme.palette.error.main\n                    : theme.palette.primary.main,\n                fontFamily: designTokens.typography.inputLabel.fontFamily,\n                fontSize: designTokens.typography.inputLabel.fontSize,\n                fontWeight: designTokens.typography.inputLabel.fontWeight,\n                lineHeight: designTokens.typography.inputLabel.lineHeight,\n                whiteSpace: \"nowrap\",\n              }}\n            >\n              {`${charLeft}/${maxChars}`}\n            </Box>\n          </Box>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\n// PropTypes for type checking\nRichTextEditor.propTypes = {\n  /** Name attribute for the editor */\n  name: PropTypes.string,\n  /** Current value of the editor */\n  value: PropTypes.string,\n  /** Callback function when content changes */\n  onChange: PropTypes.func,\n  /** Callback function when editor loses focus */\n  onBlur: PropTypes.func,\n  /** Placeholder text when editor is empty */\n  placeholder: PropTypes.string,\n  /** Maximum number of characters allowed */\n  maxChars: PropTypes.number,\n  /** Height of the editor */\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Minimum height of the editor */\n  minHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Maximum height of the editor */\n  maxHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Additional styles for the container */\n  sx: PropTypes.object,\n  /** Additional inline styles */\n  style: PropTypes.object,\n};\n\n// Default props\nRichTextEditor.defaultProps = {\n  name: \"\",\n  value: \"\",\n  onChange: () => {},\n  onBlur: undefined,\n  placeholder: \"Start typing...\",\n  maxChars: null,\n  height: \"auto\",\n  minHeight: \"150px\",\n  maxHeight: null,\n  sx: {},\n  style: undefined,\n};\n"],"names":["applyFormatting","command","value","arguments","length","undefined","document","execCommand","insertLink","url","range","selection","window","getSelection","removeAllRanges","addRange","isCollapsed","linkElement","createElement","href","textContent","target","rel","insertNode","setStartAfter","setEndAfter","querySelectorAll","forEach","link","getCurrentBlockFormat","sel","anchorNode","node","nodeType","Node","ELEMENT_NODE","parentElement","_node$tagName","tag","tagName","toUpperCase","includes","toLowerCase","blockInside","Array","from","childNodes","find","child","countContentRealLength","rawText","replace","LinkTooltip","_ref","position","onSubmit","onClose","_ref$initialValue","initialValue","_ref$isEdit","isEdit","tooltipRef","storedRange","_useState2","_slicedToArray","useState","setUrl","inputRef","useRef","useEffect","setTimeout","current","focus","select","React","Paper","elevation","ref","sx","left","x","top","y","transform","zIndex","p","minWidth","maxWidth","Box","component","display","flexDirection","gap","Typography","variant","fontWeight","TextField","fullWidth","size","onChange","e","onKeyDown","key","placeholder","justifyContent","alignItems","Button","disabled","trim","textTransform","onClick","preventDefault","formattedUrl","match","type","color","propTypes","PropTypes","shape","number","isRequired","func","string","bool","oneOfType","any","object","defaultProps","tokens","spacing0_5","spacing1","small","inputText","fontFamily","fontSize","lineHeight","SelectContainer","styled","SelectInput","paddingLeft","paddingRight","borderRadius","cursor","DataContainer","ContentContainer","overflow","padding","concat","ValueText","theme","palette","text","secondary","whiteSpace","textOverflow","ButtonContainer","IconWrapper","_ref2","open","height","transition","CustomSelect","_ref3","_ref3$options","options","_ref3$placeholder","_ref3$disabled","_ref3$sx","useTheme","setOpen","anchorRef","selectedOption","opt","displayValue","label","handleClick","handleClose","tabIndex","role","opacity","pointerEvents","ExpandMoreIcon","Popover","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","slotProps","paper","mt","backgroundColor","background","boxShadow","py","map","option","MenuItem","optionValue","selected","minHeight","pl","pr","action","hover","arrayOf","Toolbar","onFormat","_ref$showStrikethroug","showStrikethrough","_ref$showCleanFormat","showCleanFormat","_ref$currentBlockForm","currentBlockFormat","_ref$currentInlineFor","currentInlineFormats","toolbarButtons","icon","FormatBoldRounded","title","group","FormatItalicRounded","FormatUnderlined","StrikethroughS","LinkIcon","Link","FormatClear","filter","Boolean","listButtons","FormatListBulletedRoundedIcon","FormatListNumberedRoundedIcon","indentButtons","FormatIndentDecreaseRoundedIcon","FormatIndentIncreaseRoundedIcon","handleButtonClick","flexWrap","event","Divider","orientation","flexItem","mx","Icon","active","Tooltip","IconButton","primary","main","bgcolor","_ref4","unorderedList","orderedList","_ref5","bold","italic","underline","strikeThrough","designTokens","spacing1_5","inputLabel","StyledEditor","paddingTop","spacing","outline","margin","marginTop","marginBottom","listStyle","borderLeft","fontStyle","textDecoration","RichTextEditor","_ref2$name","name","_ref2$value","_ref2$onChange","onBlur","_ref2$placeholder","_ref2$maxChars","maxChars","_ref2$height","_ref2$minHeight","_ref2$maxHeight","maxHeight","_ref2$sx","style","mode","editorRef","containerRef","showLinkTooltip","setShowLinkTooltip","_useState4","linkTooltipPosition","setLinkTooltipPosition","_useState6","currentLink","setCurrentLink","_useState8","charLeft","setCharLeft","_useState0","isLinkEdit","setIsLinkEdit","_useState10","setStoredRange","_useState12","isFocused","setIsFocused","_useState14","setCurrentBlockFormat","_useState16","isEmpty","setIsEmpty","_useState18","setCurrentInlineFormats","innerHTML","updateCurrentBlockFormat","useCallback","handleInput","html","charLeftLength","updateCurrentInlineFormats","handleFormat","_editorRef$current3","_editorRef$current","getRangeAt","cloneRange","rect","getBoundingClientRect","editorRect","width","bottom","_editorRef$current2","handleLinkSubmit","_editorRef$current4","createRange","selectNode","getAttribute","handleKeyDown","ctrlKey","metaKey","contains","queryCommandState","updateFormats","addEventListener","removeEventListener","_objectSpread","border","error","borderColor","_containerRef$current","_editorRef$current5","activeElement","contentEditable","onFocus","onInput","overflowY","suppressContentEditableWarning","userSelect","right","div","el","remove","removeAttribute","rangeCount","toString","deleteContents","fragment","createDocumentFragment","firstChild","appendChild","collapse"],"mappings":"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"}