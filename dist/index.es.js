import e,{useState as t,useRef as n,useEffect as r,useCallback as o}from"react";import i from"prop-types";import{Paper as a,Box as l,Typography as c,TextField as u,Button as d,Popover as s,MenuItem as m,Divider as p,Tooltip as f,IconButton as g}from"@mui/material";import{styled as v,useTheme as h}from"@mui/material/styles";import{ExpandMore as x,FormatBoldRounded as b,FormatItalicRounded as y,FormatUnderlined as E,StrikethroughS as C,Link as k,FormatClear as S,FormatListBulletedRounded as R,FormatListNumberedRounded as w,FormatIndentDecreaseRounded as T,FormatIndentIncreaseRounded as L}from"@mui/icons-material";var H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;document.execCommand(e,!1,t)},O=function(){var e=window.getSelection();if(!e||0===e.rangeCount)return null;var t=e.getRangeAt(0);return{selection:e,range:t.cloneRange(),text:e.toString(),isCollapsed:e.isCollapsed}},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=window.getSelection();if(t&&(n.removeAllRanges(),n.addRange(t)),n.isCollapsed){var r=document.createElement("a");r.href=e,r.textContent=e,r.target="_blank",r.rel="noopener noreferrer",t.insertNode(r),t.setStartAfter(r),t.setEndAfter(r),n.removeAllRanges(),n.addRange(t)}else{document.execCommand("createLink",!1,e),document.querySelectorAll('a[href="'+e+'"]').forEach(function(e){e.target="_blank",e.rel="noopener noreferrer"})}},I=function(){document.execCommand("unlink")},z=function(e){return document.queryCommandState(e)},D=function(){var e=window.getSelection();if(null==e||!e.anchorNode)return"p";for(var t=e.anchorNode.nodeType===Node.ELEMENT_NODE?e.anchorNode:e.anchorNode.parentElement;t;){var n,r=null===(n=t.tagName)||void 0===n?void 0:n.toUpperCase();if(["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE"].includes(r))return r.toLowerCase();if("LI"===r){var o=Array.from(t.childNodes).find(function(e){return e.nodeType===Node.ELEMENT_NODE&&["H1","H2","H3","H4","H5","H6","P"].includes(e.tagName)});return o?o.tagName.toLowerCase():"p"}t=t.parentElement}return"p"},B=function(e){var t=window.getSelection();if(t.rangeCount>0){var n=t.getRangeAt(0);n.deleteContents();var r=document.createElement("div");r.innerHTML=e;for(var o=document.createDocumentFragment();r.firstChild;)o.appendChild(r.firstChild);n.insertNode(o),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}},j=function(e){return e?e.replace(/<\/?[^>]+(>|$)/g,"").length:0},W=function(e){if(!e)return"";var t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll("p:empty, div:empty").forEach(function(e){return e.remove()}),t.querySelectorAll("[style]").forEach(function(e){return e.removeAttribute("style")}),t.innerHTML};function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){A(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=function(o){var i=o.position,s=o.onSubmit,m=o.onClose,p=o.initialValue,f=void 0===p?"":p,g=o.isEdit,v=void 0!==g&&g,h=o.tooltipRef,x=o.storedRange,b=M(t(f),2),y=b[0],E=b[1],C=n(null);r(function(){E(f),setTimeout(function(){C.current&&"function"==typeof C.current.focus&&C.current.focus(),C.current&&"function"==typeof C.current.select&&C.current.select()},50)},[f]);return e.createElement(a,{elevation:4,ref:h,sx:{position:"absolute",left:i.x,top:i.y,transform:"translateX(-50%)",zIndex:1e3,p:2,minWidth:320,maxWidth:400}},e.createElement(l,{component:"form",sx:{display:"flex",flexDirection:"column",gap:2}},e.createElement(c,{variant:"subtitle2",sx:{fontWeight:600}},v?"Edit Link":"Insert Link"),e.createElement(u,{inputRef:C,fullWidth:!0,size:"small",value:y,onChange:function(e){return E(e.target.value)},onKeyDown:function(e){"Escape"===e.key&&m()},placeholder:"Enter URL (e.g., https://example.com)",variant:"outlined"}),e.createElement(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement(l,{sx:{display:"flex",gap:1}},e.createElement(d,{variant:"contained",size:"small",disabled:!y.trim(),sx:{textTransform:"none"},onClick:function(e){if(e.preventDefault(),y.trim()){var t=y.trim();t.match(/^https?:\/\//)||(t="https://"+t),s(t)}}},v?"Update":"Insert"),e.createElement(d,{type:"button",variant:"outlined",size:"small",onClick:m,sx:{textTransform:"none"}},"Cancel")),v&&e.createElement(d,{type:"button",variant:"contained",color:"error",size:"small",onClick:function(){if(x){var e=window.getSelection();e.removeAllRanges(),e.addRange(x)}document.execCommand("unlink"),m()},sx:{textTransform:"none"}},"Remove"))))};_.propTypes={position:i.shape({x:i.number.isRequired,y:i.number.isRequired}).isRequired,onSubmit:i.func.isRequired,onClose:i.func.isRequired,initialValue:i.string,isEdit:i.bool,tooltipRef:i.oneOfType([i.func,i.shape({current:i.any})]),storedRange:i.object},_.defaultProps={initialValue:"",isEdit:!1,tooltipRef:null,storedRange:null};var U={spacing0_5:"4px",spacing1:"8px"},K={small:"4px"},V={inputText:{fontFamily:"'Roboto', sans-serif",fontSize:"14px",fontWeight:400,lineHeight:"24px"}},$=v(l)({position:"relative",display:"flex",flexDirection:"column",alignItems:"flex-start"}),Q=v(l)({display:"flex",flexDirection:"column",alignItems:"flex-start",paddingLeft:U.spacing1,paddingRight:0,borderRadius:K.small,cursor:"pointer"}),X=v(l)({display:"flex",alignItems:"flex-end",justifyContent:"flex-end",gap:U.spacing0_5}),Y=v(l)({display:"flex",alignItems:"flex-start",gap:U.spacing1,overflow:"hidden",padding:"".concat(U.spacing0_5," 0")}),G=v("span")(function(e){var t=e.theme;return{fontFamily:V.inputText.fontFamily,fontSize:V.inputText.fontSize,fontWeight:V.inputText.fontWeight,lineHeight:V.inputText.lineHeight,color:t.palette.text.secondary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),J=v(l)({display:"flex",alignItems:"flex-end",justifyContent:"center",padding:"0 ".concat(U.spacing0_5)}),Z=v(l)(function(e){var t=e.open;return{display:"flex",alignItems:"center",justifyContent:"center",height:"32px",padding:"".concat(U.spacing1," 0"),borderRadius:K.small,"& > div":{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:U.spacing0_5,borderRadius:K.small,overflow:"hidden",transition:"transform 0.2s ease",transform:t?"rotate(180deg)":"rotate(0deg)"}}}),ee=function(r){var o=r.value,i=r.options,a=void 0===i?[]:i,c=r.onChange,u=r.placeholder,d=void 0===u?"Select...":u,p=r.disabled,f=void 0!==p&&p,g=r.sx,v=void 0===g?{}:g,b=h(),y=M(t(!1),2),E=y[0],C=y[1],k=n(null),S=a.find(function(e){return e.value===o}),R=(null==S?void 0:S.label)||d,w=function(){f||C(!0)},T=function(){C(!1)};return e.createElement($,{sx:v},e.createElement(Q,{ref:k,onClick:w,tabIndex:f?-1:0,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),w())},role:"combobox","aria-expanded":E,"aria-haspopup":"listbox",sx:{opacity:f?.5:1,pointerEvents:f?"none":"auto"}},e.createElement(X,null,e.createElement(Y,null,e.createElement(G,null,R)),e.createElement(J,null,e.createElement(Z,{open:E},e.createElement("div",null,e.createElement(x,{sx:{fontSize:24,color:b.palette.text.secondary}})))))),e.createElement(s,{open:E,anchorEl:k.current,onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},slotProps:{paper:{sx:{mt:.5,minWidth:200,borderRadius:K.small,backgroundColor:b.palette.background.paper,boxShadow:"0px 4px 16px rgba(29, 29, 43, 0.4)"}}}},e.createElement(l,{sx:{py:"4px"}},a.map(function(t){return e.createElement(m,{key:t.value,onClick:function(){return e=t.value,c&&c({target:{value:e}}),void T();var e},selected:t.value===o,sx:{height:"28px",minHeight:"28px",minWidth:200,pl:"16px",pr:"12px",py:0,fontFamily:V.inputText.fontFamily,fontSize:V.inputText.fontSize,fontWeight:V.inputText.fontWeight,lineHeight:"16px",color:b.palette.text.secondary,"&.Mui-selected":{backgroundColor:b.palette.action.selected},"&.Mui-selected:hover":{backgroundColor:b.palette.action.hover},"&:hover":{backgroundColor:b.palette.action.hover}}},t.label)}))))};ee.propTypes={value:i.oneOfType([i.string,i.number]),options:i.arrayOf(i.shape({value:i.oneOfType([i.string,i.number]).isRequired,label:i.string.isRequired})).isRequired,onChange:i.func,placeholder:i.string,disabled:i.bool,sx:i.object},ee.defaultProps={value:void 0,onChange:void 0,placeholder:"Select...",disabled:!1,sx:{}};var te=function(t){var n=t.onFormat,r=t.showStrikethrough,o=void 0!==r&&r,i=t.showCleanFormat,a=void 0!==i&&i,c=t.currentBlockFormat,u=void 0===c?"p":c,d=t.currentInlineFormats,s=void 0===d?{}:d,m=h(),v=[{command:"bold",icon:b,title:"Bold (Ctrl+B)",group:"text"},{command:"italic",icon:y,title:"Italic (Ctrl+I)",group:"text"},{command:"underline",icon:E,title:"Underline (Ctrl+U)",group:"text"},o&&{command:"strikeThrough",icon:C,title:"Strikethrough (Ctrl+S)",group:"text"},{command:"createLink",icon:k,title:"Insert Link (Ctrl+K)",group:"link"},a&&{command:"removeFormat",icon:S,title:"Remove Formatting (Ctrl+E)",group:"clean"}].filter(Boolean),x=[{command:"insertUnorderedList",label:"â€¢ List",group:"list",icon:R},{command:"insertOrderedList",label:"1. List",group:"list",icon:w}],H=[{command:"outdent",label:"Outdent",group:"indent",icon:T},{command:"indent",label:"Indent",group:"indent",icon:L}],O=function(e,t){n(e,t)};return e.createElement(l,{sx:{p:"0.5rem 1rem",display:"flex",flexWrap:"wrap",alignItems:"center",gap:.5}},e.createElement(ee,{value:u,options:[{command:"formatBlock",value:"h1",label:"Heading 1",group:"heading"},{command:"formatBlock",value:"h2",label:"Heading 2",group:"heading"},{command:"formatBlock",value:"h3",label:"Heading 3",group:"heading"},{command:"formatBlock",value:"h4",label:"Heading 4",group:"heading"},{command:"formatBlock",value:"h5",label:"Heading 5",group:"heading"},{command:"formatBlock",value:"h6",label:"Heading 6",group:"heading"},{command:"formatBlock",value:"p",label:"Paragraph",group:"heading"}].map(function(e){return{value:e.value,label:e.label}}),onChange:function(e){return t="formatBlock",r=e.target.value,void n(t,r);var t,r},sx:{minWidth:120}}),e.createElement(p,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),e.createElement(l,{sx:{display:"flex",alignItems:"center",gap:.5}},v.map(function(t){var n=t.command,r=t.icon,o=t.title,i=(null==s?void 0:s[n])||!1;return e.createElement(f,{key:n,title:o},e.createElement(g,{onClick:function(){return O(n)},size:"small",sx:{borderRadius:"4px",color:i?m.palette.primary.main:m.palette.text.secondary,bgcolor:i?"action.selected":void 0,"&:hover":{bgcolor:m.palette.action.hover},"&:active":{bgcolor:m.palette.action.selected}}},e.createElement(r,{fontSize:"medium"})))})),e.createElement(p,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),e.createElement(l,{sx:{display:"flex",alignItems:"center",gap:.5}},x.map(function(t){var n=t.command,r=t.value,o=t.label,i=t.icon,a=!1;return"formatBlock"===n&&"blockquote"===r?a="blockquote"===u:"insertUnorderedList"===n?a=s.unorderedList:"insertOrderedList"===n&&(a=s.orderedList),e.createElement(f,{key:n,title:o},e.createElement(g,{onClick:function(){return O(n)},size:"small",sx:{borderRadius:"4px",color:a?m.palette.primary.main:m.palette.text.secondary,bgcolor:a?"action.selected":void 0,"&:hover":{bgcolor:m.palette.action.hover},"&:active":{bgcolor:m.palette.action.selected}}},e.createElement(i,{fontSize:"medium"})))})),e.createElement(p,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),e.createElement(l,{sx:{display:"flex",alignItems:"center",gap:.5}},H.map(function(t){var n=t.command,r=t.label,o=t.icon,i=(null==s?void 0:s[n])||!1;return e.createElement(f,{key:n,title:r},e.createElement(g,{onClick:function(){return O(n)},size:"small",sx:{borderRadius:"4px",color:i?m.palette.primary.main:m.palette.text.secondary,bgcolor:i?"action.selected":void 0,"&:hover":{bgcolor:m.palette.action.hover},"&:active":{bgcolor:m.palette.action.selected}}},e.createElement(o,{fontSize:"medium"})))})))};te.propTypes={onFormat:i.func.isRequired,showStrikethrough:i.bool,showCleanFormat:i.bool,currentBlockFormat:i.string,currentInlineFormats:i.shape({bold:i.bool,italic:i.bool,underline:i.bool,strikeThrough:i.bool,link:i.bool,unorderedList:i.bool,orderedList:i.bool})},te.defaultProps={showStrikethrough:!1,showCleanFormat:!1,currentBlockFormat:"p",currentInlineFormats:{}};var ne={spacing1:"8px",spacing1_5:"12px"},re="4px",oe={inputText:{fontFamily:"'Roboto', sans-serif",fontSize:"14px",fontWeight:400,lineHeight:"24px"},inputLabel:{fontFamily:"'Roboto', sans-serif",fontSize:"12px",fontWeight:400,lineHeight:"16px"}},ie=v(l)(function(e){var t=e.theme;return{padding:"".concat(ne.spacing1," ").concat(ne.spacing1_5),paddingTop:t.spacing(0),outline:"none",fontFamily:oe.inputText.fontFamily,fontSize:oe.inputText.fontSize,fontWeight:oe.inputText.fontWeight,lineHeight:oe.inputText.lineHeight,color:t.palette.text.primary,"& p":{margin:"".concat(t.spacing(1),"px 0"),"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0}},"& h1":{fontSize:"2rem",fontWeight:"bold",margin:"".concat(t.spacing(1.5),"px 0")},"& h2":{fontSize:"1.5rem",fontWeight:"bold",margin:"".concat(t.spacing(1),"px 0")},"& h3":{fontSize:"1.25rem",fontWeight:"bold",margin:"".concat(t.spacing(1),"px 0")},"& ul":{listStyle:"disc",paddingLeft:t.spacing(3),margin:"".concat(t.spacing(1),"px 0")},"& ol":{listStyle:"decimal",paddingLeft:t.spacing(3),margin:"".concat(t.spacing(1),"px 0")},"& li":{margin:"".concat(t.spacing(.5),"px 0")},"& blockquote":{borderLeft:"4px solid ".concat(t.palette.primary.main),paddingLeft:t.spacing(2),fontStyle:"italic",margin:"".concat(t.spacing(2),"px 0"),color:t.palette.text.secondary},"& a":{color:t.palette.primary.main,textDecoration:"underline","&:hover":{opacity:.8}},"& strong":{fontWeight:"bold"},"& em":{fontStyle:"italic"},"& u":{textDecoration:"underline"}}}),ae=function(i){var a=i.name,c=void 0===a?"":a,u=i.value,d=void 0===u?"":u,s=i.onChange,m=void 0===s?function(){}:s,p=i.onBlur,f=i.placeholder,g=void 0===f?"Start typing...":f,v=i.maxChars,x=void 0===v?null:v,b=i.height,y=void 0===b?"auto":b,E=i.minHeight,C=void 0===E?"150px":E,k=i.maxHeight,S=void 0===k?null:k,R=i.sx,w=void 0===R?{}:R,T=i.style,L=h();L.palette.mode;var O=n(null),I=n(null),z=n(null),B=M(t(!1),2),W=B[0],q=B[1],A=M(t({x:0,y:0}),2),N=A[0],U=A[1],K=M(t(""),2),V=K[0],$=K[1],Q=M(t(x?j(d):null),2),X=Q[0],Y=Q[1],G=M(t(!1),2),J=G[0],Z=G[1],ee=M(t(null),2),ae=ee[0],le=ee[1],ce=M(t(!1),2),ue=ce[0],de=ce[1],se=M(t("p"),2),me=se[0],pe=se[1],fe=M(t(function(){return!d||"<br>"===d||"<p><br></p>"===d}),2),ge=fe[0],ve=fe[1],he=M(t({bold:!1,italic:!1,underline:!1,strikeThrough:!1,link:!1,unorderedList:!1,orderedList:!1}),2),xe=he[0],be=he[1];r(function(){O.current&&d!==O.current.innerHTML&&(O.current.innerHTML=d),ve(!d||"<br>"===d||"<p><br></p>"===d)},[d]);var ye=o(function(){O.current&&pe(D())},[]);r(function(){ye()},[ye]);var Ee=o(function(){if(O.current&&m){var e=O.current.innerHTML;if(x){var t=j(e);Y(t)}ve(!e||"<br>"===e||"<p><br></p>"===e),m({target:{name:c,value:e}}),ye(),we()}},[m,c,x,ye,we]),Ce=o(function(e,t){var n;if("createLink"!==e){if("removeFormat"===e)return document.execCommand("removeFormat",!1,null),void Ee();H(e,t),null===(n=O.current)||void 0===n||n.focus(),Ee(),ye(),we()}else{var r=window.getSelection();if(r&&!r.isCollapsed){var o,i=r.getRangeAt(0).cloneRange();le(i);var a=i.getBoundingClientRect(),l=null===(o=O.current)||void 0===o?void 0:o.getBoundingClientRect();l&&(U({x:a.left-l.left+a.width/2,y:a.bottom-l.top+5}),$(""),Z(!1),q(!0))}else{var c=null==r?void 0:r.getRangeAt(0);if(c){var u;le(c.cloneRange());var d=c.getBoundingClientRect(),s=null===(u=O.current)||void 0===u?void 0:u.getBoundingClientRect();s&&(U({x:d.left-s.left,y:d.bottom-s.top+5}),$(""),Z(!1),q(!0))}}}},[Ee,we,ye]),ke=o(function(e){F(e,ae||void 0),q(!1),le(null),Ee()},[Ee,ae]),Se=o(function(e){var t=e.target;if("A"===t.tagName){var n;e.preventDefault();var r=document.createRange();r.selectNode(t),le(r);var o=t.getBoundingClientRect(),i=null===(n=O.current)||void 0===n?void 0:n.getBoundingClientRect();i&&(U({x:o.left-i.left+o.width/2,y:o.bottom-i.top+5}),$(t.getAttribute("href")||""),Z(!0),q(!0))}else q(!1)},[]),Re=o(function(e){if(e.ctrlKey||e.metaKey)switch(e.key){case"b":e.preventDefault(),Ce("bold");break;case"i":e.preventDefault(),Ce("italic");break;case"u":e.preventDefault(),Ce("underline");break;case"k":e.preventDefault(),Ce("createLink");break;case"s":e.preventDefault(),Ce("strikeThrough");break;case"e":e.preventDefault(),Ce("removeFormat");break;case"z":e.preventDefault(),Ce("undo");break;case"y":e.preventDefault(),Ce("redo");break;case"]":e.preventDefault(),Ce("indent");break;case"[":e.preventDefault(),Ce("outdent")}"Escape"===e.key&&(q(!1),le(null))},[Ce]),we=o(function(){ye();var e=document.getSelection();e&&O.current&&O.current.contains(e.anchorNode)&&be({bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline"),strikeThrough:document.queryCommandState("strikeThrough"),link:document.queryCommandState("createLink"),unorderedList:document.queryCommandState("insertUnorderedList"),orderedList:document.queryCommandState("insertOrderedList")})},[ye]);return r(function(){var e=function(){ye(),we()};return document.addEventListener("selectionchange",e),function(){document.removeEventListener("selectionchange",e)}},[ye,we]),e.createElement(l,{ref:z,tabIndex:-1,sx:P({border:"1px solid ".concat(x&&X>x?L.palette.error.main:L.palette.primary.main),borderRadius:re,"&:focus-within":{borderColor:x&&X>x?L.palette.error.main:L.palette.primary.main},color:L.palette.text.primary,backgroundColor:L.palette.background.paper,fontFamily:oe.inputText.fontFamily},w),style:T,onBlur:function(){var e,t,n=document.activeElement;null!==(e=z.current)&&void 0!==e&&e.contains(n)||(de(!1),"function"==typeof p&&p({target:{value:null===(t=O.current)||void 0===t?void 0:t.innerHTML}}))}},e.createElement(te,{onFormat:Ce,showStrikethrough:!0,showCleanFormat:!0,currentBlockFormat:me,currentInlineFormats:xe}),e.createElement(l,{style:{position:"relative"}},e.createElement(ie,{ref:O,contentEditable:!0,onFocus:function(){return de(!0)},onInput:Ee,onClick:Se,onKeyDown:Re,sx:{minHeight:C,height:y,maxHeight:S,overflowY:S?"auto":void 0},suppressContentEditableWarning:!0}),ge&&!ue&&e.createElement(l,{sx:{position:"absolute",top:ne.spacing1,left:ne.spacing1_5,color:L.palette.text.secondary,pointerEvents:"none",userSelect:"none",fontFamily:oe.inputText.fontFamily,fontSize:oe.inputText.fontSize,lineHeight:oe.inputText.lineHeight}},g),W&&e.createElement(_,{position:N,onSubmit:ke,onClose:function(){q(!1),le(null)},initialValue:V,isEdit:J,tooltipRef:I,storedRange:ae}),x&&e.createElement(l,{sx:{position:"absolute",bottom:"-1px",right:"11px",height:"2px",display:"flex",alignItems:"center",padding:"0 4px",background:L.palette.background.paper}},e.createElement(l,{sx:{color:X>x?L.palette.error.main:L.palette.primary.main,fontFamily:oe.inputLabel.fontFamily,fontSize:oe.inputLabel.fontSize,fontWeight:oe.inputLabel.fontWeight,lineHeight:oe.inputLabel.lineHeight,whiteSpace:"nowrap"}},"".concat(X,"/").concat(x)))))};ae.propTypes={name:i.string,value:i.string,onChange:i.func,onBlur:i.func,placeholder:i.string,maxChars:i.number,height:i.oneOfType([i.string,i.number]),minHeight:i.oneOfType([i.string,i.number]),maxHeight:i.oneOfType([i.string,i.number]),sx:i.object,style:i.object},ae.defaultProps={name:"",value:"",onChange:function(){},onBlur:void 0,placeholder:"Start typing...",maxChars:null,height:"auto",minHeight:"150px",maxHeight:null,sx:{},style:void 0};export{ee as CustomSelect,_ as LinkTooltip,ae as RichTextEditor,te as Toolbar,H as applyFormatting,W as cleanHTML,j as countContentRealLength,ae as default,D as getCurrentBlockFormat,O as getSelectionInfo,B as insertHTML,F as insertLink,z as isFormatActive,I as removeLink};
//# sourceMappingURL=index.es.js.map
